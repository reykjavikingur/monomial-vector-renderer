{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","src/scripts/animator.js","src/scripts/graph-renderer.js","src/scripts/grapher.js","src/scripts/interval.js","src/scripts/listener.js","src/scripts/main.js","src/scripts/monomial.js","src/scripts/multi-button.js","src/scripts/multi-presser.js","src/scripts/point-renderer.js","src/scripts/polygon-spinner.js","src/scripts/spinner3d.js","src/scripts/spinner4d.js","src/scripts/vector.js"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","function Animator(fn) {\n    var goingToStep = false, running = false;\n    function animate() {\n        if (goingToStep || running) {\n            fn();\n            goingToStep = false;\n        }\n        window.requestAnimationFrame(animate);\n    }\n    animate();\n    return {\n        start() {\n            running = true;\n        },\n        stop() {\n            running = false;\n        },\n        step() {\n            goingToStep = true;\n        },\n        done() {\n            goingToStep = false;\n            running = false;\n        }\n    }\n}\n\nmodule.exports = Animator;\n","const Grapher = require('./grapher');\nconst Monomial = require('./monomial');\n\nfunction GraphRenderer(canvas, options) {\n    var grapher = Grapher(canvas, {\n        xmin: options.xmin, xmax: options.xmax,\n        ymin: options.ymin, ymax: options.ymax,\n    });\n    return {\n        render(vectors, colors) {\n            if (!colors) {\n                colors = ['black'];\n            }\n            var monomials = vectors.map(vector => Monomial.create(vector));\n            grapher.clear();\n            for (let i in monomials) {\n                let monomial = monomials[i];\n                let color = colors[i % colors.length];\n                grapher.graph(color, monomial);\n            }\n        },\n        get xmin() {\n            return options.xmin;\n        },\n        get ymin() {\n            return options.ymin;\n        },\n        get xmax() {\n            return options.xmax;\n        },\n        get ymax() {\n            return options.ymax;\n        },\n        done() {\n            grapher.done();\n        },\n    };\n}\n\nmodule.exports = GraphRenderer;\n","const Interval = require('./interval');\n\nfunction Grapher(canvas, options) {\n    var context = canvas.getContext('2d');\n    var w = canvas.width;\n    var h = canvas.height;\n\n    var interval = Interval({\n        xmin: options.xmin,\n        xmax: options.xmax,\n        ymin: options.ymin,\n        ymax: options.ymax,\n    });\n\n    clear();\n\n    function clear() {\n        context.save();\n        context.fillStyle = options.backgroundColor || 'white';\n        context.fillRect(0, 0, w, h);\n        context.restore();\n    }\n\n    return {\n        clear() {\n            clear();\n        },\n        graph(color, fn) {\n            context.save();\n            context.save();\n            var pw = interval.getPixelWidth(context);\n            var xmin = interval.xmin;\n            var xmax = interval.xmax;\n            interval.adjustCanvasContext(context);\n            context.beginPath();\n            context.moveTo(xmin, fn(xmin));\n            for (let x = xmin + pw; x <= xmax; x += pw) {\n                context.lineTo(x, fn(x));\n            }\n            context.restore();\n            context.lineJoin = 'round';\n            context.lineWidth = 2;\n            context.strokeStyle = color;\n            context.stroke();\n            context.restore();\n        },\n        done() {\n\n        }\n    }\n}\n\nmodule.exports = Grapher;\n","function Interval(options) {\n    var xmin = options.xmin;\n    var xmax = options.xmax;\n    var ymin = options.ymin;\n    var ymax = options.ymax;\n    var xrange = xmax - xmin;\n    var yrange = ymax - ymin;\n\n    return {\n        xmin: xmin,\n        xmax: xmax,\n        ymin: ymin,\n        ymax: ymax,\n        getPixelWidth(context) {\n            var w = context.canvas.width;\n            return xrange / w;\n        },\n        getPixelPosition(context, x, y) {\n            var w = context.canvas.width;\n            var h = context.canvas.height;\n            var xscale = w / xrange;\n            var yscale = h / yrange;\n            var xmid = Math.round(Math.abs(xmin / xrange) * w);\n            var ymid = Math.round(Math.abs(ymin / yrange) * h);\n            return [\n                x * xscale + xmid,\n                y * yscale + ymid,\n            ];\n        },\n        adjustCanvasContext(context) {\n            var w = context.canvas.width;\n            var h = context.canvas.height;\n            var xscale = w / xrange;\n            var yscale = h / yrange;\n            var xmid = Math.round(Math.abs(xmin / xrange) * w);\n            var ymid = Math.round(Math.abs(ymin / yrange) * h);\n            context.translate(xmid, ymid);\n            context.scale(xscale, -yscale);\n        },\n    };\n}\n\nmodule.exports = Interval;\n","function Listener(target, type, cb) {\n    target.addEventListener(type, cb);\n    return {\n        done() {\n            target.removeEventListener(type, cb);\n        }\n    }\n}\n\nmodule.exports = Listener;\n","console.log('starting main');\n\nconst Vector = require('./vector');\nconst PolygonSpinner = require('./polygon-spinner');\nconst Spinner3d = require('./spinner3d');\nconst Spinner4d = require('./spinner4d');\n\nconst template = `\n\n<h2>2d spinner</h2>\n<div class=\"container2\"></div>\n\n<h2>3d spinner</h2>\n<div class=\"container3\"></div>\n\n<h2>4d spinner</h2>\n<div class=\"container4\"></div>\n`;\n\nvar mainEl = document.querySelector('main');\n\nmainEl.innerHTML = template;\n\nPolygonSpinner(mainEl.querySelector('.container2'));\n\nSpinner3d(mainEl.querySelector('.container3'), {\n    points: Vector.cube(0.5),\n});\n\nSpinner4d(mainEl.querySelector('.container4'), {\n    points: Vector.hypercube(4, 1),\n});\n","const Monomial = {\n    create(coefficients) {\n        return x => {\n            var sum = 0;\n            for (let n in coefficients) {\n                let c = coefficients[n];\n                let xn = Math.pow(x, n);\n                sum += c * xn;\n            }\n            return sum;\n        };\n    },\n};\n\nmodule.exports = Monomial;\n","const Listener = require('./listener');\n\nfunction MultiButton(nodes, cb) {\n    var buttons = [];\n    for (let node of nodes) {\n        let button = Listener(node, 'click', event => {\n            setValue(event.target.value);\n        });\n        buttons.push(button);\n    }\n    return {\n        set value(v) {\n            setValue(v);\n        },\n        done() {\n            for (let button of buttons) {\n                button.done();\n            }\n        }\n    };\n    function setValue(value) {\n        for (let node of nodes) {\n            node.disabled = node.value === value;\n        }\n        cb(value);\n    }\n}\n\nmodule.exports = MultiButton;\n","const Listener = require('./listener');\n\nfunction MultiPresser(nodes, cb){\n    var ups = [];\n    var dns = [];\n    for (let node of nodes) {\n        let dn = Listener(node, 'mousedown', event => {\n            cb(event.target);\n        });\n        dns.push(dn);\n        let up = Listener(node, 'mouseup', event => {\n            cb(null);\n        });\n        ups.push(up);\n    }\n    return {\n        done() {\n            for (let dn of dns) {\n                dn.done();\n            }\n            for (let up of ups) {\n                up.done();\n            }\n        },\n    };\n}\n\nmodule.exports = MultiPresser;\n","const Vector = require('./vector');\nconst Interval = require('./interval');\n\nfunction PointRenderer(canvas, options) {\n    var context = canvas.getContext('2d');\n    var interval = Interval({\n        xmin: options.xmin, xmax: options.xmax,\n        ymin: options.ymin, ymax: options.ymax,\n    });\n    clear();\n    return {\n        render(points, colors) {\n            var colorize = Vector.colorizer(colors);\n            if (!colors) {\n                colors = ['black'];\n            }\n            clear();\n            for (let i in points) {\n                let color = colorize(points[i], i);\n                colors[i % colors.length];\n                let point = points[i];\n                var x = point[0];\n                var y = point[1];\n                var canvasPoint = interval.getPixelPosition(context, x, y);\n                var cx = canvasPoint[0];\n                var cy = canvasPoint[1];\n                context.save();\n                context.strokeStyle = color;\n                context.strokeRect(cx, cy, 2, 2);\n                context.restore();\n            }\n        },\n        done() {\n\n        }\n    };\n\n    function clear() {\n        context.save();\n        context.fillStyle = 'white';\n        context.fillRect(0, 0, canvas.width, canvas.height);\n        context.restore();\n    }\n}\n\nmodule.exports = PointRenderer;\n","const PointRenderer = require('./point-renderer');\nconst GraphRenderer = require('./graph-renderer');\nconst Animator = require('./animator');\nconst Vector = require('./vector');\nconst MultiPresser = require('./multi-presser');\n\nconst ROTATION_SPEED = 0.01;\n\nconst template = `\n<canvas class=\"graph-renderer\" width=\"256\" height=\"256\"></canvas>\n<canvas class=\"point-renderer\" width=\"256\" height=\"256\"></canvas>\n<input type=\"button\" value=\"-\" class=\"speed\"/>\n<input type=\"button\" value=\"+\" class=\"speed\"/>\n`;\n\nfunction PolygonSpinner(node, options) {\n\n    var mainEl = node;\n\n    node.innerHTML = template;\n\n    var graphCanvas = node.querySelector('canvas.graph-renderer');\n    var pointCanvas = node.querySelector('canvas.point-renderer');\n    var options = {\n        xmin: -2, xmax: 2,\n        ymin: -2, ymax: 2,\n    };\n    var graphRenderer = GraphRenderer(graphCanvas, options);\n    var pointRenderer = PointRenderer(pointCanvas, options);\n\n    var points = Vector.polygon(6, 1);\n\n    var rotationSpeed = 0;\n\n    var animator = Animator(() => {\n        var colors = ['red', 'yellow', 'green', 'cyan', 'blue', 'magenta'];\n        graphRenderer.render(points, colors);\n        pointRenderer.render(points, colors);\n        for (let i in points) {\n            points[i] = Vector.rotate(points[i], 0, 1, rotationSpeed);\n        }\n    });\n\n    var multiPresser = MultiPresser(node.querySelectorAll('input[type=\"button\"].speed'), target => {\n        if (target) {\n            switch (target.value) {\n                case '-':\n                    rotationSpeed = -ROTATION_SPEED;\n                    break;\n                case '+':\n                    rotationSpeed = ROTATION_SPEED;\n                    break;\n                default:\n                    break;\n            }\n            animator.start();\n        }\n        else {\n            rotationSpeed = 0;\n            animator.stop();\n        }\n    });\n\n    animator.step();\n\n    return {\n        done() {\n            animator.done();\n            graphRenderer.done();\n            pointRenderer.done();\n            multiPresser.done();\n        },\n    };\n\n}\n\nmodule.exports = PolygonSpinner;\n","const Vector = require('./vector');\nconst Animator = require('./animator');\nconst GraphRenderer = require('./graph-renderer');\nconst PointRenderer = require('./point-renderer');\nconst MultiButton = require('./multi-button');\nconst MultiPresser = require('./multi-presser');\n\nconst ROTATION_SPEED = 0.01;\n\nconst template = `\n<canvas width=\"256\" height=\"256\" class=\"graph-renderer\"></canvas>\n<canvas width=\"256\" height=\"256\" class=\"point-renderer\"></canvas>\n<input type=\"button\" value=\"x-y\" class=\"axis\"/>\n<input type=\"button\" value=\"y-z\" class=\"axis\"/>\n<input type=\"button\" value=\"x-z\" class=\"axis\"/>\n<input type=\"button\" value=\"-\" class=\"speed\"/>\n<input type=\"button\" value=\"+\" class=\"speed\"/>\n`;\n\nfunction Spinner3d(node, options) {\n\n    if (!options) {\n        options = {};\n    }\n\n    // vectors to render\n    var points = options.points || [];\n\n    // indices of axes to rotate\n    var rotation;\n\n    var rotationSpeed = 0;\n\n    node.innerHTML = template;\n\n    var rendererOptions = {\n        xmin: -2, xmax: 2,\n        ymin: -2, ymax: 2,\n    };\n    var graphRenderer = GraphRenderer(node.querySelector('canvas.graph-renderer'), rendererOptions);\n    var pointRenderer = PointRenderer(node.querySelector('canvas.point-renderer'), rendererOptions);\n\n    var animator = Animator(() => {\n        points = points.map(point => Vector.rotate(point, rotation[0], rotation[1], rotationSpeed));\n        graphRenderer.render(points);\n        pointRenderer.render(points, (point, index) => {\n            // z => c : 2 => 255, -2 => 0\n            var z = point[2];\n            var c = 63 * z + 127;\n            c = Math.max(0, Math.min(255, Math.round(c)));\n            return `rgb(${c}, ${c}, ${c})`;\n        });\n    });\n\n    var axisMultiButton = MultiButton(node.querySelectorAll('input[type=\"button\"].axis'), value => {\n        var parts = String(value).split('-');\n        var axes = ['x', 'y', 'z'];\n        var axis1 = axes.indexOf(parts[0]);\n        var axis2 = axes.indexOf(parts[1]);\n        rotation = [axis1, axis2];\n    });\n    axisMultiButton.value = 'x-y'; // initialize to default axis\n\n    var speedMultiButton = MultiPresser(node.querySelectorAll('input[type=\"button\"].speed'), target => {\n        if (target) {\n            switch (target.value) {\n                case '-':\n                    rotationSpeed = -ROTATION_SPEED;\n                    break;\n                case '+':\n                    rotationSpeed = ROTATION_SPEED;\n                    break;\n                default:\n                    break;\n            }\n            animator.start();\n        }\n        else {\n            rotationSpeed = 0;\n            animator.stop();\n        }\n    });\n\n    animator.step();\n\n    return {\n        done(){\n            graphRenderer.done();\n            pointRenderer.done();\n            animator.done();\n            axisMultiButton.done();\n            speedMultiButton.done();\n        }\n    }\n}\n\nmodule.exports = Spinner3d;\n","const Vector = require('./vector');\nconst Animator = require('./animator');\nconst GraphRenderer = require('./graph-renderer');\nconst PointRenderer = require('./point-renderer');\nconst MultiButton = require('./multi-button');\nconst MultiPresser = require('./multi-presser');\n\nconst ROTATION_SPEED = 0.01;\n\nconst template = `\n<canvas width=\"256\" height=\"256\" class=\"graph-renderer\"></canvas>\n<canvas width=\"256\" height=\"256\" class=\"point-renderer\"></canvas>\n<input type=\"button\" value=\"x-y\" class=\"axis\"/>\n<input type=\"button\" value=\"y-z\" class=\"axis\"/>\n<input type=\"button\" value=\"x-z\" class=\"axis\"/>\n<input type=\"button\" value=\"x-w\" class=\"axis\"/>\n<input type=\"button\" value=\"y-w\" class=\"axis\"/>\n<input type=\"button\" value=\"z-w\" class=\"axis\"/>\n<input type=\"button\" value=\"-\" class=\"speed\"/>\n<input type=\"button\" value=\"+\" class=\"speed\"/>\n`;\n\nfunction Spinner4d(node, options) {\n\n    if (!options) {\n        options = {};\n    }\n\n    // vectors to render\n    var points = options.points || [];\n    for (let i in points) {\n        while (points[i].length < 4) {\n            points[i].push(0);\n        }\n    }\n\n    // indices of axes to rotate\n    var rotation;\n\n    var rotationSpeed = 0;\n\n    node.innerHTML = template;\n\n    var rendererOptions = {\n        xmin: -2, xmax: 2,\n        ymin: -2, ymax: 2,\n    };\n    var graphRenderer = GraphRenderer(node.querySelector('canvas.graph-renderer'), rendererOptions);\n    var pointRenderer = PointRenderer(node.querySelector('canvas.point-renderer'), rendererOptions);\n\n    var animator = Animator(() => {\n        points = points.map(point => Vector.rotate(point, rotation[0], rotation[1], rotationSpeed));\n        graphRenderer.render(points);\n        pointRenderer.render(points, (point, index) => {\n            var z = point[2];\n            var w = point[3];\n            var lum = 0.25 * z + 0.5;\n            var sat = 0.25 * w + 0.5;\n            lum = Math.max(0, Math.min(100, Math.round(lum * 100)));\n            sat = Math.max(0, Math.min(100, Math.round(sat * 100)));\n            return `hsl(0, ${sat}%, ${lum}%)`;\n        });\n    });\n\n    var axisMultiButton = MultiButton(node.querySelectorAll('input[type=\"button\"].axis'), value => {\n        var parts = String(value).split('-');\n        var axes = ['x', 'y', 'z', 'w'];\n        var axis1 = axes.indexOf(parts[0]);\n        var axis2 = axes.indexOf(parts[1]);\n        rotation = [axis1, axis2];\n    });\n    axisMultiButton.value = 'x-y'; // initialize to default axis\n\n    var speedMultiButton = MultiPresser(node.querySelectorAll('input[type=\"button\"].speed'), target => {\n        if (target) {\n            switch (target.value) {\n                case '-':\n                    rotationSpeed = -ROTATION_SPEED;\n                    break;\n                case '+':\n                    rotationSpeed = ROTATION_SPEED;\n                    break;\n                default:\n                    break;\n            }\n            animator.start();\n        }\n        else {\n            rotationSpeed = 0;\n            animator.stop();\n        }\n    });\n\n    animator.step();\n\n    return {\n        done() {\n            graphRenderer.done();\n            pointRenderer.done();\n            animator.done();\n            axisMultiButton.done();\n            speedMultiButton.done();\n        }\n    };\n}\n\nmodule.exports = Spinner4d;","const TAU = Math.PI * 2;\n\nconst Vector = {\n    add(a, b) {\n        return a.map((ai, i) => a[i] + b[i]);\n    },\n    scale(s, a) {\n        return a.map(ai => s * ai);\n    },\n    rotate(a, u, v, angle) {\n        //console.log('rotating by', angle);\n        var cos = Math.cos(angle);\n        var sin = Math.sin(angle);\n        //console.log('cos', cos);\n        //console.log('sin', sin);\n        var b = a.map(ai => ai);\n        //console.log('initially', b);\n        b[u] = a[u] * cos - a[v] * sin;\n        b[v] = a[u] * sin + a[v] * cos;\n        return b;\n    },\n    polygon(n, r) {\n        // create regular polygon centered at origin with n points at radius r\n        var points = [];\n        for (let k = 0; k < n; k++) {\n            let angle = TAU * k / n;\n            let x = r * Math.cos(angle);\n            let y = r * Math.sin(angle);\n            points.push([x, y]);\n        }\n        return points;\n    },\n    cube(r) {\n        r *= Math.sqrt(3);\n        var points = [];\n        for (let x of [-r, r]) {\n            for (let y of [-r, r]) {\n                for (let z of [-r, r]) {\n                    points.push([x, y, z]);\n                }\n            }\n        }\n        return points;\n    },\n    hypercube(n, r) {\n        if (n == 1) {\n            // base case\n            return [[-r], [r]];\n        }\n        else {\n            var subpoints = this.hypercube(n - 1, r);\n            var points = [];\n            for (let subpoint of subpoints) {\n                var s1 = subpoint.slice();\n                var s2 = subpoint.slice();\n                s1.push(-r);\n                s2.push(r);\n                points.push(s1);\n                points.push(s2);\n            }\n            return points;\n        }\n    },\n    colorizer(source) {\n        if (!source) {\n            return (vector, index) => {\n                var z = vector[2] || 0;\n                var w = vector[3] || 0;\n                var angle = Math.atan2(w, z);\n                if (angle < 0) {\n                    angle += 2 * Math.PI;\n                }\n                var max = 2;\n                var magFactor = max * Math.sqrt(vector.length);\n\n                var mag = Math.sqrt(z * z + w * w);\n                var hue = Math.round(angle * 180 / Math.PI);\n                var sat = 100 + '%';\n                var lum = Math.round(mag * 100 / magFactor) + '%';\n                return `hsl(${hue}, ${sat}, ${lum})`;\n            };\n        }\n        else if (Array.isArray(source)) {\n            return (vector, index) => {\n                return source[index % source.length];\n            };\n        }\n        else if (typeof source === 'function') {\n            return source;\n        }\n        else {\n            throw new Error('invalid colorizer source');\n        }\n    },\n};\n\nmodule.exports = Vector;\n\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvc2NyaXB0cy9hbmltYXRvci5qcyIsInNyYy9zY3JpcHRzL2dyYXBoLXJlbmRlcmVyLmpzIiwic3JjL3NjcmlwdHMvZ3JhcGhlci5qcyIsInNyYy9zY3JpcHRzL2ludGVydmFsLmpzIiwic3JjL3NjcmlwdHMvbGlzdGVuZXIuanMiLCJzcmMvc2NyaXB0cy9tYWluLmpzIiwic3JjL3NjcmlwdHMvbW9ub21pYWwuanMiLCJzcmMvc2NyaXB0cy9tdWx0aS1idXR0b24uanMiLCJzcmMvc2NyaXB0cy9tdWx0aS1wcmVzc2VyLmpzIiwic3JjL3NjcmlwdHMvcG9pbnQtcmVuZGVyZXIuanMiLCJzcmMvc2NyaXB0cy9wb2x5Z29uLXNwaW5uZXIuanMiLCJzcmMvc2NyaXB0cy9zcGlubmVyM2QuanMiLCJzcmMvc2NyaXB0cy9zcGlubmVyNGQuanMiLCJzcmMvc2NyaXB0cy92ZWN0b3IuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBLFNBQVMsUUFBVCxDQUFrQixFQUFsQixFQUFzQjtBQUNsQixRQUFJLGNBQWMsS0FBbEI7QUFBQSxRQUF5QixVQUFVLEtBQW5DO0FBQ0EsYUFBUyxPQUFULEdBQW1CO0FBQ2YsWUFBSSxlQUFlLE9BQW5CLEVBQTRCO0FBQ3hCO0FBQ0EsMEJBQWMsS0FBZDtBQUNIO0FBQ0QsZUFBTyxxQkFBUCxDQUE2QixPQUE3QjtBQUNIO0FBQ0Q7QUFDQSxXQUFPO0FBQ0gsYUFERyxtQkFDSztBQUNKLHNCQUFVLElBQVY7QUFDSCxTQUhFO0FBSUgsWUFKRyxrQkFJSTtBQUNILHNCQUFVLEtBQVY7QUFDSCxTQU5FO0FBT0gsWUFQRyxrQkFPSTtBQUNILDBCQUFjLElBQWQ7QUFDSCxTQVRFO0FBVUgsWUFWRyxrQkFVSTtBQUNILDBCQUFjLEtBQWQ7QUFDQSxzQkFBVSxLQUFWO0FBQ0g7QUFiRSxLQUFQO0FBZUg7O0FBRUQsT0FBTyxPQUFQLEdBQWlCLFFBQWpCOzs7OztBQzNCQSxJQUFNLFVBQVUsUUFBUSxXQUFSLENBQWhCO0FBQ0EsSUFBTSxXQUFXLFFBQVEsWUFBUixDQUFqQjs7QUFFQSxTQUFTLGFBQVQsQ0FBdUIsTUFBdkIsRUFBK0IsT0FBL0IsRUFBd0M7QUFDcEMsUUFBSSxVQUFVLFFBQVEsTUFBUixFQUFnQjtBQUMxQixjQUFNLFFBQVEsSUFEWSxFQUNOLE1BQU0sUUFBUSxJQURSO0FBRTFCLGNBQU0sUUFBUSxJQUZZLEVBRU4sTUFBTSxRQUFRO0FBRlIsS0FBaEIsQ0FBZDtBQUlBLFdBQU87QUFDSCxjQURHLGtCQUNJLE9BREosRUFDYSxNQURiLEVBQ3FCO0FBQ3BCLGdCQUFJLENBQUMsTUFBTCxFQUFhO0FBQ1QseUJBQVMsQ0FBQyxPQUFELENBQVQ7QUFDSDtBQUNELGdCQUFJLFlBQVksUUFBUSxHQUFSLENBQVk7QUFBQSx1QkFBVSxTQUFTLE1BQVQsQ0FBZ0IsTUFBaEIsQ0FBVjtBQUFBLGFBQVosQ0FBaEI7QUFDQSxvQkFBUSxLQUFSO0FBQ0EsaUJBQUssSUFBSSxDQUFULElBQWMsU0FBZCxFQUF5QjtBQUNyQixvQkFBSSxXQUFXLFVBQVUsQ0FBVixDQUFmO0FBQ0Esb0JBQUksUUFBUSxPQUFPLElBQUksT0FBTyxNQUFsQixDQUFaO0FBQ0Esd0JBQVEsS0FBUixDQUFjLEtBQWQsRUFBcUIsUUFBckI7QUFDSDtBQUNKLFNBWkU7O0FBYUgsWUFBSSxJQUFKLEdBQVc7QUFDUCxtQkFBTyxRQUFRLElBQWY7QUFDSCxTQWZFO0FBZ0JILFlBQUksSUFBSixHQUFXO0FBQ1AsbUJBQU8sUUFBUSxJQUFmO0FBQ0gsU0FsQkU7QUFtQkgsWUFBSSxJQUFKLEdBQVc7QUFDUCxtQkFBTyxRQUFRLElBQWY7QUFDSCxTQXJCRTtBQXNCSCxZQUFJLElBQUosR0FBVztBQUNQLG1CQUFPLFFBQVEsSUFBZjtBQUNILFNBeEJFO0FBeUJILFlBekJHLGtCQXlCSTtBQUNILG9CQUFRLElBQVI7QUFDSDtBQTNCRSxLQUFQO0FBNkJIOztBQUVELE9BQU8sT0FBUCxHQUFpQixhQUFqQjs7Ozs7QUN2Q0EsSUFBTSxXQUFXLFFBQVEsWUFBUixDQUFqQjs7QUFFQSxTQUFTLE9BQVQsQ0FBaUIsTUFBakIsRUFBeUIsT0FBekIsRUFBa0M7QUFDOUIsUUFBSSxVQUFVLE9BQU8sVUFBUCxDQUFrQixJQUFsQixDQUFkO0FBQ0EsUUFBSSxJQUFJLE9BQU8sS0FBZjtBQUNBLFFBQUksSUFBSSxPQUFPLE1BQWY7O0FBRUEsUUFBSSxXQUFXLFNBQVM7QUFDcEIsY0FBTSxRQUFRLElBRE07QUFFcEIsY0FBTSxRQUFRLElBRk07QUFHcEIsY0FBTSxRQUFRLElBSE07QUFJcEIsY0FBTSxRQUFRO0FBSk0sS0FBVCxDQUFmOztBQU9BOztBQUVBLGFBQVMsTUFBVCxHQUFpQjtBQUNiLGdCQUFRLElBQVI7QUFDQSxnQkFBUSxTQUFSLEdBQW9CLFFBQVEsZUFBUixJQUEyQixPQUEvQztBQUNBLGdCQUFRLFFBQVIsQ0FBaUIsQ0FBakIsRUFBb0IsQ0FBcEIsRUFBdUIsQ0FBdkIsRUFBMEIsQ0FBMUI7QUFDQSxnQkFBUSxPQUFSO0FBQ0g7O0FBRUQsV0FBTztBQUNILGFBREcsbUJBQ0s7QUFDSjtBQUNILFNBSEU7QUFJSCxhQUpHLGlCQUlHLEtBSkgsRUFJVSxFQUpWLEVBSWM7QUFDYixvQkFBUSxJQUFSO0FBQ0Esb0JBQVEsSUFBUjtBQUNBLGdCQUFJLEtBQUssU0FBUyxhQUFULENBQXVCLE9BQXZCLENBQVQ7QUFDQSxnQkFBSSxPQUFPLFNBQVMsSUFBcEI7QUFDQSxnQkFBSSxPQUFPLFNBQVMsSUFBcEI7QUFDQSxxQkFBUyxtQkFBVCxDQUE2QixPQUE3QjtBQUNBLG9CQUFRLFNBQVI7QUFDQSxvQkFBUSxNQUFSLENBQWUsSUFBZixFQUFxQixHQUFHLElBQUgsQ0FBckI7QUFDQSxpQkFBSyxJQUFJLElBQUksT0FBTyxFQUFwQixFQUF3QixLQUFLLElBQTdCLEVBQW1DLEtBQUssRUFBeEMsRUFBNEM7QUFDeEMsd0JBQVEsTUFBUixDQUFlLENBQWYsRUFBa0IsR0FBRyxDQUFILENBQWxCO0FBQ0g7QUFDRCxvQkFBUSxPQUFSO0FBQ0Esb0JBQVEsUUFBUixHQUFtQixPQUFuQjtBQUNBLG9CQUFRLFNBQVIsR0FBb0IsQ0FBcEI7QUFDQSxvQkFBUSxXQUFSLEdBQXNCLEtBQXRCO0FBQ0Esb0JBQVEsTUFBUjtBQUNBLG9CQUFRLE9BQVI7QUFDSCxTQXRCRTtBQXVCSCxZQXZCRyxrQkF1QkksQ0FFTjtBQXpCRSxLQUFQO0FBMkJIOztBQUVELE9BQU8sT0FBUCxHQUFpQixPQUFqQjs7Ozs7QUNwREEsU0FBUyxRQUFULENBQWtCLE9BQWxCLEVBQTJCO0FBQ3ZCLFFBQUksT0FBTyxRQUFRLElBQW5CO0FBQ0EsUUFBSSxPQUFPLFFBQVEsSUFBbkI7QUFDQSxRQUFJLE9BQU8sUUFBUSxJQUFuQjtBQUNBLFFBQUksT0FBTyxRQUFRLElBQW5CO0FBQ0EsUUFBSSxTQUFTLE9BQU8sSUFBcEI7QUFDQSxRQUFJLFNBQVMsT0FBTyxJQUFwQjs7QUFFQSxXQUFPO0FBQ0gsY0FBTSxJQURIO0FBRUgsY0FBTSxJQUZIO0FBR0gsY0FBTSxJQUhIO0FBSUgsY0FBTSxJQUpIO0FBS0gscUJBTEcseUJBS1csT0FMWCxFQUtvQjtBQUNuQixnQkFBSSxJQUFJLFFBQVEsTUFBUixDQUFlLEtBQXZCO0FBQ0EsbUJBQU8sU0FBUyxDQUFoQjtBQUNILFNBUkU7QUFTSCx3QkFURyw0QkFTYyxPQVRkLEVBU3VCLENBVHZCLEVBUzBCLENBVDFCLEVBUzZCO0FBQzVCLGdCQUFJLElBQUksUUFBUSxNQUFSLENBQWUsS0FBdkI7QUFDQSxnQkFBSSxJQUFJLFFBQVEsTUFBUixDQUFlLE1BQXZCO0FBQ0EsZ0JBQUksU0FBUyxJQUFJLE1BQWpCO0FBQ0EsZ0JBQUksU0FBUyxJQUFJLE1BQWpCO0FBQ0EsZ0JBQUksT0FBTyxLQUFLLEtBQUwsQ0FBVyxLQUFLLEdBQUwsQ0FBUyxPQUFPLE1BQWhCLElBQTBCLENBQXJDLENBQVg7QUFDQSxnQkFBSSxPQUFPLEtBQUssS0FBTCxDQUFXLEtBQUssR0FBTCxDQUFTLE9BQU8sTUFBaEIsSUFBMEIsQ0FBckMsQ0FBWDtBQUNBLG1CQUFPLENBQ0gsSUFBSSxNQUFKLEdBQWEsSUFEVixFQUVILElBQUksTUFBSixHQUFhLElBRlYsQ0FBUDtBQUlILFNBcEJFO0FBcUJILDJCQXJCRywrQkFxQmlCLE9BckJqQixFQXFCMEI7QUFDekIsZ0JBQUksSUFBSSxRQUFRLE1BQVIsQ0FBZSxLQUF2QjtBQUNBLGdCQUFJLElBQUksUUFBUSxNQUFSLENBQWUsTUFBdkI7QUFDQSxnQkFBSSxTQUFTLElBQUksTUFBakI7QUFDQSxnQkFBSSxTQUFTLElBQUksTUFBakI7QUFDQSxnQkFBSSxPQUFPLEtBQUssS0FBTCxDQUFXLEtBQUssR0FBTCxDQUFTLE9BQU8sTUFBaEIsSUFBMEIsQ0FBckMsQ0FBWDtBQUNBLGdCQUFJLE9BQU8sS0FBSyxLQUFMLENBQVcsS0FBSyxHQUFMLENBQVMsT0FBTyxNQUFoQixJQUEwQixDQUFyQyxDQUFYO0FBQ0Esb0JBQVEsU0FBUixDQUFrQixJQUFsQixFQUF3QixJQUF4QjtBQUNBLG9CQUFRLEtBQVIsQ0FBYyxNQUFkLEVBQXNCLENBQUMsTUFBdkI7QUFDSDtBQTlCRSxLQUFQO0FBZ0NIOztBQUVELE9BQU8sT0FBUCxHQUFpQixRQUFqQjs7Ozs7QUMxQ0EsU0FBUyxRQUFULENBQWtCLE1BQWxCLEVBQTBCLElBQTFCLEVBQWdDLEVBQWhDLEVBQW9DO0FBQ2hDLFdBQU8sZ0JBQVAsQ0FBd0IsSUFBeEIsRUFBOEIsRUFBOUI7QUFDQSxXQUFPO0FBQ0gsWUFERyxrQkFDSTtBQUNILG1CQUFPLG1CQUFQLENBQTJCLElBQTNCLEVBQWlDLEVBQWpDO0FBQ0g7QUFIRSxLQUFQO0FBS0g7O0FBRUQsT0FBTyxPQUFQLEdBQWlCLFFBQWpCOzs7OztBQ1RBLFFBQVEsR0FBUixDQUFZLGVBQVo7O0FBRUEsSUFBTSxTQUFTLFFBQVEsVUFBUixDQUFmO0FBQ0EsSUFBTSxpQkFBaUIsUUFBUSxtQkFBUixDQUF2QjtBQUNBLElBQU0sWUFBWSxRQUFRLGFBQVIsQ0FBbEI7QUFDQSxJQUFNLFlBQVksUUFBUSxhQUFSLENBQWxCOztBQUVBLElBQU0sb0xBQU47O0FBWUEsSUFBSSxTQUFTLFNBQVMsYUFBVCxDQUF1QixNQUF2QixDQUFiOztBQUVBLE9BQU8sU0FBUCxHQUFtQixRQUFuQjs7QUFFQSxlQUFlLE9BQU8sYUFBUCxDQUFxQixhQUFyQixDQUFmOztBQUVBLFVBQVUsT0FBTyxhQUFQLENBQXFCLGFBQXJCLENBQVYsRUFBK0M7QUFDM0MsWUFBUSxPQUFPLElBQVAsQ0FBWSxHQUFaO0FBRG1DLENBQS9DOztBQUlBLFVBQVUsT0FBTyxhQUFQLENBQXFCLGFBQXJCLENBQVYsRUFBK0M7QUFDM0MsWUFBUSxPQUFPLFNBQVAsQ0FBaUIsQ0FBakIsRUFBb0IsQ0FBcEI7QUFEbUMsQ0FBL0M7Ozs7O0FDN0JBLElBQU0sV0FBVztBQUNiLFVBRGEsa0JBQ04sWUFETSxFQUNRO0FBQ2pCLGVBQU8sYUFBSztBQUNSLGdCQUFJLE1BQU0sQ0FBVjtBQUNBLGlCQUFLLElBQUksQ0FBVCxJQUFjLFlBQWQsRUFBNEI7QUFDeEIsb0JBQUksSUFBSSxhQUFhLENBQWIsQ0FBUjtBQUNBLG9CQUFJLEtBQUssS0FBSyxHQUFMLENBQVMsQ0FBVCxFQUFZLENBQVosQ0FBVDtBQUNBLHVCQUFPLElBQUksRUFBWDtBQUNIO0FBQ0QsbUJBQU8sR0FBUDtBQUNILFNBUkQ7QUFTSDtBQVhZLENBQWpCOztBQWNBLE9BQU8sT0FBUCxHQUFpQixRQUFqQjs7Ozs7QUNkQSxJQUFNLFdBQVcsUUFBUSxZQUFSLENBQWpCOztBQUVBLFNBQVMsV0FBVCxDQUFxQixLQUFyQixFQUE0QixFQUE1QixFQUFnQztBQUM1QixRQUFJLFVBQVUsRUFBZDtBQUQ0QjtBQUFBO0FBQUE7O0FBQUE7QUFFNUIsNkJBQWlCLEtBQWpCLDhIQUF3QjtBQUFBLGdCQUFmLElBQWU7O0FBQ3BCLGdCQUFJLFNBQVMsU0FBUyxJQUFULEVBQWUsT0FBZixFQUF3QixpQkFBUztBQUMxQyx5QkFBUyxNQUFNLE1BQU4sQ0FBYSxLQUF0QjtBQUNILGFBRlksQ0FBYjtBQUdBLG9CQUFRLElBQVIsQ0FBYSxNQUFiO0FBQ0g7QUFQMkI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFRNUIsV0FBTztBQUNILFlBQUksS0FBSixDQUFVLENBQVYsRUFBYTtBQUNULHFCQUFTLENBQVQ7QUFDSCxTQUhFO0FBSUgsWUFKRyxrQkFJSTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUNILHNDQUFtQixPQUFuQixtSUFBNEI7QUFBQSx3QkFBbkIsTUFBbUI7O0FBQ3hCLDJCQUFPLElBQVA7QUFDSDtBQUhFO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFJTjtBQVJFLEtBQVA7QUFVQSxhQUFTLFFBQVQsQ0FBa0IsS0FBbEIsRUFBeUI7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFDckIsa0NBQWlCLEtBQWpCLG1JQUF3QjtBQUFBLG9CQUFmLEtBQWU7O0FBQ3BCLHNCQUFLLFFBQUwsR0FBZ0IsTUFBSyxLQUFMLEtBQWUsS0FBL0I7QUFDSDtBQUhvQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUlyQixXQUFHLEtBQUg7QUFDSDtBQUNKOztBQUVELE9BQU8sT0FBUCxHQUFpQixXQUFqQjs7Ozs7QUM1QkEsSUFBTSxXQUFXLFFBQVEsWUFBUixDQUFqQjs7QUFFQSxTQUFTLFlBQVQsQ0FBc0IsS0FBdEIsRUFBNkIsRUFBN0IsRUFBZ0M7QUFDNUIsUUFBSSxNQUFNLEVBQVY7QUFDQSxRQUFJLE1BQU0sRUFBVjtBQUY0QjtBQUFBO0FBQUE7O0FBQUE7QUFHNUIsNkJBQWlCLEtBQWpCLDhIQUF3QjtBQUFBLGdCQUFmLElBQWU7O0FBQ3BCLGdCQUFJLEtBQUssU0FBUyxJQUFULEVBQWUsV0FBZixFQUE0QixpQkFBUztBQUMxQyxtQkFBRyxNQUFNLE1BQVQ7QUFDSCxhQUZRLENBQVQ7QUFHQSxnQkFBSSxJQUFKLENBQVMsRUFBVDtBQUNBLGdCQUFJLEtBQUssU0FBUyxJQUFULEVBQWUsU0FBZixFQUEwQixpQkFBUztBQUN4QyxtQkFBRyxJQUFIO0FBQ0gsYUFGUSxDQUFUO0FBR0EsZ0JBQUksSUFBSixDQUFTLEVBQVQ7QUFDSDtBQVoyQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQWE1QixXQUFPO0FBQ0gsWUFERyxrQkFDSTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUNILHNDQUFlLEdBQWYsbUlBQW9CO0FBQUEsd0JBQVgsRUFBVzs7QUFDaEIsdUJBQUcsSUFBSDtBQUNIO0FBSEU7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFJSCxzQ0FBZSxHQUFmLG1JQUFvQjtBQUFBLHdCQUFYLEVBQVc7O0FBQ2hCLHVCQUFHLElBQUg7QUFDSDtBQU5FO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFPTjtBQVJFLEtBQVA7QUFVSDs7QUFFRCxPQUFPLE9BQVAsR0FBaUIsWUFBakI7Ozs7O0FDM0JBLElBQU0sU0FBUyxRQUFRLFVBQVIsQ0FBZjtBQUNBLElBQU0sV0FBVyxRQUFRLFlBQVIsQ0FBakI7O0FBRUEsU0FBUyxhQUFULENBQXVCLE1BQXZCLEVBQStCLE9BQS9CLEVBQXdDO0FBQ3BDLFFBQUksVUFBVSxPQUFPLFVBQVAsQ0FBa0IsSUFBbEIsQ0FBZDtBQUNBLFFBQUksV0FBVyxTQUFTO0FBQ3BCLGNBQU0sUUFBUSxJQURNLEVBQ0EsTUFBTSxRQUFRLElBRGQ7QUFFcEIsY0FBTSxRQUFRLElBRk0sRUFFQSxNQUFNLFFBQVE7QUFGZCxLQUFULENBQWY7QUFJQTtBQUNBLFdBQU87QUFDSCxjQURHLGtCQUNJLE1BREosRUFDWSxNQURaLEVBQ29CO0FBQ25CLGdCQUFJLFdBQVcsT0FBTyxTQUFQLENBQWlCLE1BQWpCLENBQWY7QUFDQSxnQkFBSSxDQUFDLE1BQUwsRUFBYTtBQUNULHlCQUFTLENBQUMsT0FBRCxDQUFUO0FBQ0g7QUFDRDtBQUNBLGlCQUFLLElBQUksQ0FBVCxJQUFjLE1BQWQsRUFBc0I7QUFDbEIsb0JBQUksUUFBUSxTQUFTLE9BQU8sQ0FBUCxDQUFULEVBQW9CLENBQXBCLENBQVo7QUFDQSx1QkFBTyxJQUFJLE9BQU8sTUFBbEI7QUFDQSxvQkFBSSxRQUFRLE9BQU8sQ0FBUCxDQUFaO0FBQ0Esb0JBQUksSUFBSSxNQUFNLENBQU4sQ0FBUjtBQUNBLG9CQUFJLElBQUksTUFBTSxDQUFOLENBQVI7QUFDQSxvQkFBSSxjQUFjLFNBQVMsZ0JBQVQsQ0FBMEIsT0FBMUIsRUFBbUMsQ0FBbkMsRUFBc0MsQ0FBdEMsQ0FBbEI7QUFDQSxvQkFBSSxLQUFLLFlBQVksQ0FBWixDQUFUO0FBQ0Esb0JBQUksS0FBSyxZQUFZLENBQVosQ0FBVDtBQUNBLHdCQUFRLElBQVI7QUFDQSx3QkFBUSxXQUFSLEdBQXNCLEtBQXRCO0FBQ0Esd0JBQVEsVUFBUixDQUFtQixFQUFuQixFQUF1QixFQUF2QixFQUEyQixDQUEzQixFQUE4QixDQUE5QjtBQUNBLHdCQUFRLE9BQVI7QUFDSDtBQUNKLFNBckJFO0FBc0JILFlBdEJHLGtCQXNCSSxDQUVOO0FBeEJFLEtBQVA7O0FBMkJBLGFBQVMsS0FBVCxHQUFpQjtBQUNiLGdCQUFRLElBQVI7QUFDQSxnQkFBUSxTQUFSLEdBQW9CLE9BQXBCO0FBQ0EsZ0JBQVEsUUFBUixDQUFpQixDQUFqQixFQUFvQixDQUFwQixFQUF1QixPQUFPLEtBQTlCLEVBQXFDLE9BQU8sTUFBNUM7QUFDQSxnQkFBUSxPQUFSO0FBQ0g7QUFDSjs7QUFFRCxPQUFPLE9BQVAsR0FBaUIsYUFBakI7Ozs7O0FDN0NBLElBQU0sZ0JBQWdCLFFBQVEsa0JBQVIsQ0FBdEI7QUFDQSxJQUFNLGdCQUFnQixRQUFRLGtCQUFSLENBQXRCO0FBQ0EsSUFBTSxXQUFXLFFBQVEsWUFBUixDQUFqQjtBQUNBLElBQU0sU0FBUyxRQUFRLFVBQVIsQ0FBZjtBQUNBLElBQU0sZUFBZSxRQUFRLGlCQUFSLENBQXJCOztBQUVBLElBQU0saUJBQWlCLElBQXZCOztBQUVBLElBQU0scVBBQU47O0FBT0EsU0FBUyxjQUFULENBQXdCLElBQXhCLEVBQThCLE9BQTlCLEVBQXVDOztBQUVuQyxRQUFJLFNBQVMsSUFBYjs7QUFFQSxTQUFLLFNBQUwsR0FBaUIsUUFBakI7O0FBRUEsUUFBSSxjQUFjLEtBQUssYUFBTCxDQUFtQix1QkFBbkIsQ0FBbEI7QUFDQSxRQUFJLGNBQWMsS0FBSyxhQUFMLENBQW1CLHVCQUFuQixDQUFsQjtBQUNBLFFBQUksVUFBVTtBQUNWLGNBQU0sQ0FBQyxDQURHLEVBQ0EsTUFBTSxDQUROO0FBRVYsY0FBTSxDQUFDLENBRkcsRUFFQSxNQUFNO0FBRk4sS0FBZDtBQUlBLFFBQUksZ0JBQWdCLGNBQWMsV0FBZCxFQUEyQixPQUEzQixDQUFwQjtBQUNBLFFBQUksZ0JBQWdCLGNBQWMsV0FBZCxFQUEyQixPQUEzQixDQUFwQjs7QUFFQSxRQUFJLFNBQVMsT0FBTyxPQUFQLENBQWUsQ0FBZixFQUFrQixDQUFsQixDQUFiOztBQUVBLFFBQUksZ0JBQWdCLENBQXBCOztBQUVBLFFBQUksV0FBVyxTQUFTLFlBQU07QUFDMUIsWUFBSSxTQUFTLENBQUMsS0FBRCxFQUFRLFFBQVIsRUFBa0IsT0FBbEIsRUFBMkIsTUFBM0IsRUFBbUMsTUFBbkMsRUFBMkMsU0FBM0MsQ0FBYjtBQUNBLHNCQUFjLE1BQWQsQ0FBcUIsTUFBckIsRUFBNkIsTUFBN0I7QUFDQSxzQkFBYyxNQUFkLENBQXFCLE1BQXJCLEVBQTZCLE1BQTdCO0FBQ0EsYUFBSyxJQUFJLENBQVQsSUFBYyxNQUFkLEVBQXNCO0FBQ2xCLG1CQUFPLENBQVAsSUFBWSxPQUFPLE1BQVAsQ0FBYyxPQUFPLENBQVAsQ0FBZCxFQUF5QixDQUF6QixFQUE0QixDQUE1QixFQUErQixhQUEvQixDQUFaO0FBQ0g7QUFDSixLQVBjLENBQWY7O0FBU0EsUUFBSSxlQUFlLGFBQWEsS0FBSyxnQkFBTCxDQUFzQiw0QkFBdEIsQ0FBYixFQUFrRSxrQkFBVTtBQUMzRixZQUFJLE1BQUosRUFBWTtBQUNSLG9CQUFRLE9BQU8sS0FBZjtBQUNJLHFCQUFLLEdBQUw7QUFDSSxvQ0FBZ0IsQ0FBQyxjQUFqQjtBQUNBO0FBQ0oscUJBQUssR0FBTDtBQUNJLG9DQUFnQixjQUFoQjtBQUNBO0FBQ0o7QUFDSTtBQVJSO0FBVUEscUJBQVMsS0FBVDtBQUNILFNBWkQsTUFhSztBQUNELDRCQUFnQixDQUFoQjtBQUNBLHFCQUFTLElBQVQ7QUFDSDtBQUNKLEtBbEJrQixDQUFuQjs7QUFvQkEsYUFBUyxJQUFUOztBQUVBLFdBQU87QUFDSCxZQURHLGtCQUNJO0FBQ0gscUJBQVMsSUFBVDtBQUNBLDBCQUFjLElBQWQ7QUFDQSwwQkFBYyxJQUFkO0FBQ0EseUJBQWEsSUFBYjtBQUNIO0FBTkUsS0FBUDtBQVNIOztBQUVELE9BQU8sT0FBUCxHQUFpQixjQUFqQjs7Ozs7QUM1RUEsSUFBTSxTQUFTLFFBQVEsVUFBUixDQUFmO0FBQ0EsSUFBTSxXQUFXLFFBQVEsWUFBUixDQUFqQjtBQUNBLElBQU0sZ0JBQWdCLFFBQVEsa0JBQVIsQ0FBdEI7QUFDQSxJQUFNLGdCQUFnQixRQUFRLGtCQUFSLENBQXRCO0FBQ0EsSUFBTSxjQUFjLFFBQVEsZ0JBQVIsQ0FBcEI7QUFDQSxJQUFNLGVBQWUsUUFBUSxpQkFBUixDQUFyQjs7QUFFQSxJQUFNLGlCQUFpQixJQUF2Qjs7QUFFQSxJQUFNLHdZQUFOOztBQVVBLFNBQVMsU0FBVCxDQUFtQixJQUFuQixFQUF5QixPQUF6QixFQUFrQzs7QUFFOUIsUUFBSSxDQUFDLE9BQUwsRUFBYztBQUNWLGtCQUFVLEVBQVY7QUFDSDs7QUFFRDtBQUNBLFFBQUksU0FBUyxRQUFRLE1BQVIsSUFBa0IsRUFBL0I7O0FBRUE7QUFDQSxRQUFJLFFBQUo7O0FBRUEsUUFBSSxnQkFBZ0IsQ0FBcEI7O0FBRUEsU0FBSyxTQUFMLEdBQWlCLFFBQWpCOztBQUVBLFFBQUksa0JBQWtCO0FBQ2xCLGNBQU0sQ0FBQyxDQURXLEVBQ1IsTUFBTSxDQURFO0FBRWxCLGNBQU0sQ0FBQyxDQUZXLEVBRVIsTUFBTTtBQUZFLEtBQXRCO0FBSUEsUUFBSSxnQkFBZ0IsY0FBYyxLQUFLLGFBQUwsQ0FBbUIsdUJBQW5CLENBQWQsRUFBMkQsZUFBM0QsQ0FBcEI7QUFDQSxRQUFJLGdCQUFnQixjQUFjLEtBQUssYUFBTCxDQUFtQix1QkFBbkIsQ0FBZCxFQUEyRCxlQUEzRCxDQUFwQjs7QUFFQSxRQUFJLFdBQVcsU0FBUyxZQUFNO0FBQzFCLGlCQUFTLE9BQU8sR0FBUCxDQUFXO0FBQUEsbUJBQVMsT0FBTyxNQUFQLENBQWMsS0FBZCxFQUFxQixTQUFTLENBQVQsQ0FBckIsRUFBa0MsU0FBUyxDQUFULENBQWxDLEVBQStDLGFBQS9DLENBQVQ7QUFBQSxTQUFYLENBQVQ7QUFDQSxzQkFBYyxNQUFkLENBQXFCLE1BQXJCO0FBQ0Esc0JBQWMsTUFBZCxDQUFxQixNQUFyQixFQUE2QixVQUFDLEtBQUQsRUFBUSxLQUFSLEVBQWtCO0FBQzNDO0FBQ0EsZ0JBQUksSUFBSSxNQUFNLENBQU4sQ0FBUjtBQUNBLGdCQUFJLElBQUksS0FBSyxDQUFMLEdBQVMsR0FBakI7QUFDQSxnQkFBSSxLQUFLLEdBQUwsQ0FBUyxDQUFULEVBQVksS0FBSyxHQUFMLENBQVMsR0FBVCxFQUFjLEtBQUssS0FBTCxDQUFXLENBQVgsQ0FBZCxDQUFaLENBQUo7QUFDQSw0QkFBYyxDQUFkLFVBQW9CLENBQXBCLFVBQTBCLENBQTFCO0FBQ0gsU0FORDtBQU9ILEtBVmMsQ0FBZjs7QUFZQSxRQUFJLGtCQUFrQixZQUFZLEtBQUssZ0JBQUwsQ0FBc0IsMkJBQXRCLENBQVosRUFBZ0UsaUJBQVM7QUFDM0YsWUFBSSxRQUFRLE9BQU8sS0FBUCxFQUFjLEtBQWQsQ0FBb0IsR0FBcEIsQ0FBWjtBQUNBLFlBQUksT0FBTyxDQUFDLEdBQUQsRUFBTSxHQUFOLEVBQVcsR0FBWCxDQUFYO0FBQ0EsWUFBSSxRQUFRLEtBQUssT0FBTCxDQUFhLE1BQU0sQ0FBTixDQUFiLENBQVo7QUFDQSxZQUFJLFFBQVEsS0FBSyxPQUFMLENBQWEsTUFBTSxDQUFOLENBQWIsQ0FBWjtBQUNBLG1CQUFXLENBQUMsS0FBRCxFQUFRLEtBQVIsQ0FBWDtBQUNILEtBTnFCLENBQXRCO0FBT0Esb0JBQWdCLEtBQWhCLEdBQXdCLEtBQXhCLENBMUM4QixDQTBDQzs7QUFFL0IsUUFBSSxtQkFBbUIsYUFBYSxLQUFLLGdCQUFMLENBQXNCLDRCQUF0QixDQUFiLEVBQWtFLGtCQUFVO0FBQy9GLFlBQUksTUFBSixFQUFZO0FBQ1Isb0JBQVEsT0FBTyxLQUFmO0FBQ0kscUJBQUssR0FBTDtBQUNJLG9DQUFnQixDQUFDLGNBQWpCO0FBQ0E7QUFDSixxQkFBSyxHQUFMO0FBQ0ksb0NBQWdCLGNBQWhCO0FBQ0E7QUFDSjtBQUNJO0FBUlI7QUFVQSxxQkFBUyxLQUFUO0FBQ0gsU0FaRCxNQWFLO0FBQ0QsNEJBQWdCLENBQWhCO0FBQ0EscUJBQVMsSUFBVDtBQUNIO0FBQ0osS0FsQnNCLENBQXZCOztBQW9CQSxhQUFTLElBQVQ7O0FBRUEsV0FBTztBQUNILFlBREcsa0JBQ0c7QUFDRiwwQkFBYyxJQUFkO0FBQ0EsMEJBQWMsSUFBZDtBQUNBLHFCQUFTLElBQVQ7QUFDQSw0QkFBZ0IsSUFBaEI7QUFDQSw2QkFBaUIsSUFBakI7QUFDSDtBQVBFLEtBQVA7QUFTSDs7QUFFRCxPQUFPLE9BQVAsR0FBaUIsU0FBakI7Ozs7O0FDaEdBLElBQU0sU0FBUyxRQUFRLFVBQVIsQ0FBZjtBQUNBLElBQU0sV0FBVyxRQUFRLFlBQVIsQ0FBakI7QUFDQSxJQUFNLGdCQUFnQixRQUFRLGtCQUFSLENBQXRCO0FBQ0EsSUFBTSxnQkFBZ0IsUUFBUSxrQkFBUixDQUF0QjtBQUNBLElBQU0sY0FBYyxRQUFRLGdCQUFSLENBQXBCO0FBQ0EsSUFBTSxlQUFlLFFBQVEsaUJBQVIsQ0FBckI7O0FBRUEsSUFBTSxpQkFBaUIsSUFBdkI7O0FBRUEsSUFBTSwyaEJBQU47O0FBYUEsU0FBUyxTQUFULENBQW1CLElBQW5CLEVBQXlCLE9BQXpCLEVBQWtDOztBQUU5QixRQUFJLENBQUMsT0FBTCxFQUFjO0FBQ1Ysa0JBQVUsRUFBVjtBQUNIOztBQUVEO0FBQ0EsUUFBSSxTQUFTLFFBQVEsTUFBUixJQUFrQixFQUEvQjtBQUNBLFNBQUssSUFBSSxDQUFULElBQWMsTUFBZCxFQUFzQjtBQUNsQixlQUFPLE9BQU8sQ0FBUCxFQUFVLE1BQVYsR0FBbUIsQ0FBMUIsRUFBNkI7QUFDekIsbUJBQU8sQ0FBUCxFQUFVLElBQVYsQ0FBZSxDQUFmO0FBQ0g7QUFDSjs7QUFFRDtBQUNBLFFBQUksUUFBSjs7QUFFQSxRQUFJLGdCQUFnQixDQUFwQjs7QUFFQSxTQUFLLFNBQUwsR0FBaUIsUUFBakI7O0FBRUEsUUFBSSxrQkFBa0I7QUFDbEIsY0FBTSxDQUFDLENBRFcsRUFDUixNQUFNLENBREU7QUFFbEIsY0FBTSxDQUFDLENBRlcsRUFFUixNQUFNO0FBRkUsS0FBdEI7QUFJQSxRQUFJLGdCQUFnQixjQUFjLEtBQUssYUFBTCxDQUFtQix1QkFBbkIsQ0FBZCxFQUEyRCxlQUEzRCxDQUFwQjtBQUNBLFFBQUksZ0JBQWdCLGNBQWMsS0FBSyxhQUFMLENBQW1CLHVCQUFuQixDQUFkLEVBQTJELGVBQTNELENBQXBCOztBQUVBLFFBQUksV0FBVyxTQUFTLFlBQU07QUFDMUIsaUJBQVMsT0FBTyxHQUFQLENBQVc7QUFBQSxtQkFBUyxPQUFPLE1BQVAsQ0FBYyxLQUFkLEVBQXFCLFNBQVMsQ0FBVCxDQUFyQixFQUFrQyxTQUFTLENBQVQsQ0FBbEMsRUFBK0MsYUFBL0MsQ0FBVDtBQUFBLFNBQVgsQ0FBVDtBQUNBLHNCQUFjLE1BQWQsQ0FBcUIsTUFBckI7QUFDQSxzQkFBYyxNQUFkLENBQXFCLE1BQXJCLEVBQTZCLFVBQUMsS0FBRCxFQUFRLEtBQVIsRUFBa0I7QUFDM0MsZ0JBQUksSUFBSSxNQUFNLENBQU4sQ0FBUjtBQUNBLGdCQUFJLElBQUksTUFBTSxDQUFOLENBQVI7QUFDQSxnQkFBSSxNQUFNLE9BQU8sQ0FBUCxHQUFXLEdBQXJCO0FBQ0EsZ0JBQUksTUFBTSxPQUFPLENBQVAsR0FBVyxHQUFyQjtBQUNBLGtCQUFNLEtBQUssR0FBTCxDQUFTLENBQVQsRUFBWSxLQUFLLEdBQUwsQ0FBUyxHQUFULEVBQWMsS0FBSyxLQUFMLENBQVcsTUFBTSxHQUFqQixDQUFkLENBQVosQ0FBTjtBQUNBLGtCQUFNLEtBQUssR0FBTCxDQUFTLENBQVQsRUFBWSxLQUFLLEdBQUwsQ0FBUyxHQUFULEVBQWMsS0FBSyxLQUFMLENBQVcsTUFBTSxHQUFqQixDQUFkLENBQVosQ0FBTjtBQUNBLCtCQUFpQixHQUFqQixXQUEwQixHQUExQjtBQUNILFNBUkQ7QUFTSCxLQVpjLENBQWY7O0FBY0EsUUFBSSxrQkFBa0IsWUFBWSxLQUFLLGdCQUFMLENBQXNCLDJCQUF0QixDQUFaLEVBQWdFLGlCQUFTO0FBQzNGLFlBQUksUUFBUSxPQUFPLEtBQVAsRUFBYyxLQUFkLENBQW9CLEdBQXBCLENBQVo7QUFDQSxZQUFJLE9BQU8sQ0FBQyxHQUFELEVBQU0sR0FBTixFQUFXLEdBQVgsRUFBZ0IsR0FBaEIsQ0FBWDtBQUNBLFlBQUksUUFBUSxLQUFLLE9BQUwsQ0FBYSxNQUFNLENBQU4sQ0FBYixDQUFaO0FBQ0EsWUFBSSxRQUFRLEtBQUssT0FBTCxDQUFhLE1BQU0sQ0FBTixDQUFiLENBQVo7QUFDQSxtQkFBVyxDQUFDLEtBQUQsRUFBUSxLQUFSLENBQVg7QUFDSCxLQU5xQixDQUF0QjtBQU9BLG9CQUFnQixLQUFoQixHQUF3QixLQUF4QixDQWpEOEIsQ0FpREM7O0FBRS9CLFFBQUksbUJBQW1CLGFBQWEsS0FBSyxnQkFBTCxDQUFzQiw0QkFBdEIsQ0FBYixFQUFrRSxrQkFBVTtBQUMvRixZQUFJLE1BQUosRUFBWTtBQUNSLG9CQUFRLE9BQU8sS0FBZjtBQUNJLHFCQUFLLEdBQUw7QUFDSSxvQ0FBZ0IsQ0FBQyxjQUFqQjtBQUNBO0FBQ0oscUJBQUssR0FBTDtBQUNJLG9DQUFnQixjQUFoQjtBQUNBO0FBQ0o7QUFDSTtBQVJSO0FBVUEscUJBQVMsS0FBVDtBQUNILFNBWkQsTUFhSztBQUNELDRCQUFnQixDQUFoQjtBQUNBLHFCQUFTLElBQVQ7QUFDSDtBQUNKLEtBbEJzQixDQUF2Qjs7QUFvQkEsYUFBUyxJQUFUOztBQUVBLFdBQU87QUFDSCxZQURHLGtCQUNJO0FBQ0gsMEJBQWMsSUFBZDtBQUNBLDBCQUFjLElBQWQ7QUFDQSxxQkFBUyxJQUFUO0FBQ0EsNEJBQWdCLElBQWhCO0FBQ0EsNkJBQWlCLElBQWpCO0FBQ0g7QUFQRSxLQUFQO0FBU0g7O0FBRUQsT0FBTyxPQUFQLEdBQWlCLFNBQWpCOzs7OztBQzFHQSxJQUFNLE1BQU0sS0FBSyxFQUFMLEdBQVUsQ0FBdEI7O0FBRUEsSUFBTSxTQUFTO0FBQ1gsT0FEVyxlQUNQLENBRE8sRUFDSixDQURJLEVBQ0Q7QUFDTixlQUFPLEVBQUUsR0FBRixDQUFNLFVBQUMsRUFBRCxFQUFLLENBQUw7QUFBQSxtQkFBVyxFQUFFLENBQUYsSUFBTyxFQUFFLENBQUYsQ0FBbEI7QUFBQSxTQUFOLENBQVA7QUFDSCxLQUhVO0FBSVgsU0FKVyxpQkFJTCxDQUpLLEVBSUYsQ0FKRSxFQUlDO0FBQ1IsZUFBTyxFQUFFLEdBQUYsQ0FBTTtBQUFBLG1CQUFNLElBQUksRUFBVjtBQUFBLFNBQU4sQ0FBUDtBQUNILEtBTlU7QUFPWCxVQVBXLGtCQU9KLENBUEksRUFPRCxDQVBDLEVBT0UsQ0FQRixFQU9LLEtBUEwsRUFPWTtBQUNuQjtBQUNBLFlBQUksTUFBTSxLQUFLLEdBQUwsQ0FBUyxLQUFULENBQVY7QUFDQSxZQUFJLE1BQU0sS0FBSyxHQUFMLENBQVMsS0FBVCxDQUFWO0FBQ0E7QUFDQTtBQUNBLFlBQUksSUFBSSxFQUFFLEdBQUYsQ0FBTTtBQUFBLG1CQUFNLEVBQU47QUFBQSxTQUFOLENBQVI7QUFDQTtBQUNBLFVBQUUsQ0FBRixJQUFPLEVBQUUsQ0FBRixJQUFPLEdBQVAsR0FBYSxFQUFFLENBQUYsSUFBTyxHQUEzQjtBQUNBLFVBQUUsQ0FBRixJQUFPLEVBQUUsQ0FBRixJQUFPLEdBQVAsR0FBYSxFQUFFLENBQUYsSUFBTyxHQUEzQjtBQUNBLGVBQU8sQ0FBUDtBQUNILEtBbEJVO0FBbUJYLFdBbkJXLG1CQW1CSCxDQW5CRyxFQW1CQSxDQW5CQSxFQW1CRztBQUNWO0FBQ0EsWUFBSSxTQUFTLEVBQWI7QUFDQSxhQUFLLElBQUksSUFBSSxDQUFiLEVBQWdCLElBQUksQ0FBcEIsRUFBdUIsR0FBdkIsRUFBNEI7QUFDeEIsZ0JBQUksUUFBUSxNQUFNLENBQU4sR0FBVSxDQUF0QjtBQUNBLGdCQUFJLElBQUksSUFBSSxLQUFLLEdBQUwsQ0FBUyxLQUFULENBQVo7QUFDQSxnQkFBSSxJQUFJLElBQUksS0FBSyxHQUFMLENBQVMsS0FBVCxDQUFaO0FBQ0EsbUJBQU8sSUFBUCxDQUFZLENBQUMsQ0FBRCxFQUFJLENBQUosQ0FBWjtBQUNIO0FBQ0QsZUFBTyxNQUFQO0FBQ0gsS0E3QlU7QUE4QlgsUUE5QlcsZ0JBOEJOLENBOUJNLEVBOEJIO0FBQ0osYUFBSyxLQUFLLElBQUwsQ0FBVSxDQUFWLENBQUw7QUFDQSxZQUFJLFNBQVMsRUFBYjtBQUZJLG1CQUdVLENBQUMsQ0FBQyxDQUFGLEVBQUssQ0FBTCxDQUhWO0FBR0osaURBQXVCO0FBQWxCLGdCQUFJLFlBQUosQ0FBa0IsWUFDTCxDQUFDLENBQUMsQ0FBRixFQUFLLENBQUwsQ0FESzs7QUFDbkIseURBQXVCO0FBQWxCLG9CQUFJLGNBQUosQ0FBa0IsWUFDTCxDQUFDLENBQUMsQ0FBRixFQUFLLENBQUwsQ0FESzs7QUFDbkIsNkRBQXVCO0FBQWxCLHdCQUFJLGNBQUo7QUFDRCwyQkFBTyxJQUFQLENBQVksQ0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVAsQ0FBWjtBQUNIO0FBQ0o7QUFDSjtBQUNELGVBQU8sTUFBUDtBQUNILEtBekNVO0FBMENYLGFBMUNXLHFCQTBDRCxDQTFDQyxFQTBDRSxDQTFDRixFQTBDSztBQUNaLFlBQUksS0FBSyxDQUFULEVBQVk7QUFDUjtBQUNBLG1CQUFPLENBQUMsQ0FBQyxDQUFDLENBQUYsQ0FBRCxFQUFPLENBQUMsQ0FBRCxDQUFQLENBQVA7QUFDSCxTQUhELE1BSUs7QUFDRCxnQkFBSSxZQUFZLEtBQUssU0FBTCxDQUFlLElBQUksQ0FBbkIsRUFBc0IsQ0FBdEIsQ0FBaEI7QUFDQSxnQkFBSSxTQUFTLEVBQWI7QUFGQztBQUFBO0FBQUE7O0FBQUE7QUFHRCxxQ0FBcUIsU0FBckIsOEhBQWdDO0FBQUEsd0JBQXZCLFFBQXVCOztBQUM1Qix3QkFBSSxLQUFLLFNBQVMsS0FBVCxFQUFUO0FBQ0Esd0JBQUksS0FBSyxTQUFTLEtBQVQsRUFBVDtBQUNBLHVCQUFHLElBQUgsQ0FBUSxDQUFDLENBQVQ7QUFDQSx1QkFBRyxJQUFILENBQVEsQ0FBUjtBQUNBLDJCQUFPLElBQVAsQ0FBWSxFQUFaO0FBQ0EsMkJBQU8sSUFBUCxDQUFZLEVBQVo7QUFDSDtBQVZBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBV0QsbUJBQU8sTUFBUDtBQUNIO0FBQ0osS0E1RFU7QUE2RFgsYUE3RFcscUJBNkRELE1BN0RDLEVBNkRPO0FBQ2QsWUFBSSxDQUFDLE1BQUwsRUFBYTtBQUNULG1CQUFPLFVBQUMsTUFBRCxFQUFTLEtBQVQsRUFBbUI7QUFDdEIsb0JBQUksSUFBSSxPQUFPLENBQVAsS0FBYSxDQUFyQjtBQUNBLG9CQUFJLElBQUksT0FBTyxDQUFQLEtBQWEsQ0FBckI7QUFDQSxvQkFBSSxRQUFRLEtBQUssS0FBTCxDQUFXLENBQVgsRUFBYyxDQUFkLENBQVo7QUFDQSxvQkFBSSxRQUFRLENBQVosRUFBZTtBQUNYLDZCQUFTLElBQUksS0FBSyxFQUFsQjtBQUNIO0FBQ0Qsb0JBQUksTUFBTSxDQUFWO0FBQ0Esb0JBQUksWUFBWSxNQUFNLEtBQUssSUFBTCxDQUFVLE9BQU8sTUFBakIsQ0FBdEI7O0FBRUEsb0JBQUksTUFBTSxLQUFLLElBQUwsQ0FBVSxJQUFJLENBQUosR0FBUSxJQUFJLENBQXRCLENBQVY7QUFDQSxvQkFBSSxNQUFNLEtBQUssS0FBTCxDQUFXLFFBQVEsR0FBUixHQUFjLEtBQUssRUFBOUIsQ0FBVjtBQUNBLG9CQUFJLE1BQU0sTUFBTSxHQUFoQjtBQUNBLG9CQUFJLE1BQU0sS0FBSyxLQUFMLENBQVcsTUFBTSxHQUFOLEdBQVksU0FBdkIsSUFBb0MsR0FBOUM7QUFDQSxnQ0FBYyxHQUFkLFVBQXNCLEdBQXRCLFVBQThCLEdBQTlCO0FBQ0gsYUFmRDtBQWdCSCxTQWpCRCxNQWtCSyxJQUFJLE1BQU0sT0FBTixDQUFjLE1BQWQsQ0FBSixFQUEyQjtBQUM1QixtQkFBTyxVQUFDLE1BQUQsRUFBUyxLQUFULEVBQW1CO0FBQ3RCLHVCQUFPLE9BQU8sUUFBUSxPQUFPLE1BQXRCLENBQVA7QUFDSCxhQUZEO0FBR0gsU0FKSSxNQUtBLElBQUksT0FBTyxNQUFQLEtBQWtCLFVBQXRCLEVBQWtDO0FBQ25DLG1CQUFPLE1BQVA7QUFDSCxTQUZJLE1BR0E7QUFDRCxrQkFBTSxJQUFJLEtBQUosQ0FBVSwwQkFBVixDQUFOO0FBQ0g7QUFDSjtBQTNGVSxDQUFmOztBQThGQSxPQUFPLE9BQVAsR0FBaUIsTUFBakIiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiZnVuY3Rpb24gQW5pbWF0b3IoZm4pIHtcbiAgICB2YXIgZ29pbmdUb1N0ZXAgPSBmYWxzZSwgcnVubmluZyA9IGZhbHNlO1xuICAgIGZ1bmN0aW9uIGFuaW1hdGUoKSB7XG4gICAgICAgIGlmIChnb2luZ1RvU3RlcCB8fCBydW5uaW5nKSB7XG4gICAgICAgICAgICBmbigpO1xuICAgICAgICAgICAgZ29pbmdUb1N0ZXAgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGFuaW1hdGUpO1xuICAgIH1cbiAgICBhbmltYXRlKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc3RhcnQoKSB7XG4gICAgICAgICAgICBydW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgc3RvcCgpIHtcbiAgICAgICAgICAgIHJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgfSxcbiAgICAgICAgc3RlcCgpIHtcbiAgICAgICAgICAgIGdvaW5nVG9TdGVwID0gdHJ1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZG9uZSgpIHtcbiAgICAgICAgICAgIGdvaW5nVG9TdGVwID0gZmFsc2U7XG4gICAgICAgICAgICBydW5uaW5nID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQW5pbWF0b3I7XG4iLCJjb25zdCBHcmFwaGVyID0gcmVxdWlyZSgnLi9ncmFwaGVyJyk7XG5jb25zdCBNb25vbWlhbCA9IHJlcXVpcmUoJy4vbW9ub21pYWwnKTtcblxuZnVuY3Rpb24gR3JhcGhSZW5kZXJlcihjYW52YXMsIG9wdGlvbnMpIHtcbiAgICB2YXIgZ3JhcGhlciA9IEdyYXBoZXIoY2FudmFzLCB7XG4gICAgICAgIHhtaW46IG9wdGlvbnMueG1pbiwgeG1heDogb3B0aW9ucy54bWF4LFxuICAgICAgICB5bWluOiBvcHRpb25zLnltaW4sIHltYXg6IG9wdGlvbnMueW1heCxcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgICByZW5kZXIodmVjdG9ycywgY29sb3JzKSB7XG4gICAgICAgICAgICBpZiAoIWNvbG9ycykge1xuICAgICAgICAgICAgICAgIGNvbG9ycyA9IFsnYmxhY2snXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBtb25vbWlhbHMgPSB2ZWN0b3JzLm1hcCh2ZWN0b3IgPT4gTW9ub21pYWwuY3JlYXRlKHZlY3RvcikpO1xuICAgICAgICAgICAgZ3JhcGhlci5jbGVhcigpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSBpbiBtb25vbWlhbHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgbW9ub21pYWwgPSBtb25vbWlhbHNbaV07XG4gICAgICAgICAgICAgICAgbGV0IGNvbG9yID0gY29sb3JzW2kgJSBjb2xvcnMubGVuZ3RoXTtcbiAgICAgICAgICAgICAgICBncmFwaGVyLmdyYXBoKGNvbG9yLCBtb25vbWlhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGdldCB4bWluKCkge1xuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMueG1pbjtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0IHltaW4oKSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9ucy55bWluO1xuICAgICAgICB9LFxuICAgICAgICBnZXQgeG1heCgpIHtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb25zLnhtYXg7XG4gICAgICAgIH0sXG4gICAgICAgIGdldCB5bWF4KCkge1xuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMueW1heDtcbiAgICAgICAgfSxcbiAgICAgICAgZG9uZSgpIHtcbiAgICAgICAgICAgIGdyYXBoZXIuZG9uZSgpO1xuICAgICAgICB9LFxuICAgIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gR3JhcGhSZW5kZXJlcjtcbiIsImNvbnN0IEludGVydmFsID0gcmVxdWlyZSgnLi9pbnRlcnZhbCcpO1xuXG5mdW5jdGlvbiBHcmFwaGVyKGNhbnZhcywgb3B0aW9ucykge1xuICAgIHZhciBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgdmFyIHcgPSBjYW52YXMud2lkdGg7XG4gICAgdmFyIGggPSBjYW52YXMuaGVpZ2h0O1xuXG4gICAgdmFyIGludGVydmFsID0gSW50ZXJ2YWwoe1xuICAgICAgICB4bWluOiBvcHRpb25zLnhtaW4sXG4gICAgICAgIHhtYXg6IG9wdGlvbnMueG1heCxcbiAgICAgICAgeW1pbjogb3B0aW9ucy55bWluLFxuICAgICAgICB5bWF4OiBvcHRpb25zLnltYXgsXG4gICAgfSk7XG5cbiAgICBjbGVhcigpO1xuXG4gICAgZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgICAgICBjb250ZXh0LmZpbGxTdHlsZSA9IG9wdGlvbnMuYmFja2dyb3VuZENvbG9yIHx8ICd3aGl0ZSc7XG4gICAgICAgIGNvbnRleHQuZmlsbFJlY3QoMCwgMCwgdywgaCk7XG4gICAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIGNsZWFyKCkge1xuICAgICAgICAgICAgY2xlYXIoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ3JhcGgoY29sb3IsIGZuKSB7XG4gICAgICAgICAgICBjb250ZXh0LnNhdmUoKTtcbiAgICAgICAgICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgICAgICAgICAgdmFyIHB3ID0gaW50ZXJ2YWwuZ2V0UGl4ZWxXaWR0aChjb250ZXh0KTtcbiAgICAgICAgICAgIHZhciB4bWluID0gaW50ZXJ2YWwueG1pbjtcbiAgICAgICAgICAgIHZhciB4bWF4ID0gaW50ZXJ2YWwueG1heDtcbiAgICAgICAgICAgIGludGVydmFsLmFkanVzdENhbnZhc0NvbnRleHQoY29udGV4dCk7XG4gICAgICAgICAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgY29udGV4dC5tb3ZlVG8oeG1pbiwgZm4oeG1pbikpO1xuICAgICAgICAgICAgZm9yIChsZXQgeCA9IHhtaW4gKyBwdzsgeCA8PSB4bWF4OyB4ICs9IHB3KSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5saW5lVG8oeCwgZm4oeCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGV4dC5yZXN0b3JlKCk7XG4gICAgICAgICAgICBjb250ZXh0LmxpbmVKb2luID0gJ3JvdW5kJztcbiAgICAgICAgICAgIGNvbnRleHQubGluZVdpZHRoID0gMjtcbiAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBjb2xvcjtcbiAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlKCk7XG4gICAgICAgICAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZG9uZSgpIHtcblxuICAgICAgICB9XG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEdyYXBoZXI7XG4iLCJmdW5jdGlvbiBJbnRlcnZhbChvcHRpb25zKSB7XG4gICAgdmFyIHhtaW4gPSBvcHRpb25zLnhtaW47XG4gICAgdmFyIHhtYXggPSBvcHRpb25zLnhtYXg7XG4gICAgdmFyIHltaW4gPSBvcHRpb25zLnltaW47XG4gICAgdmFyIHltYXggPSBvcHRpb25zLnltYXg7XG4gICAgdmFyIHhyYW5nZSA9IHhtYXggLSB4bWluO1xuICAgIHZhciB5cmFuZ2UgPSB5bWF4IC0geW1pbjtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHhtaW46IHhtaW4sXG4gICAgICAgIHhtYXg6IHhtYXgsXG4gICAgICAgIHltaW46IHltaW4sXG4gICAgICAgIHltYXg6IHltYXgsXG4gICAgICAgIGdldFBpeGVsV2lkdGgoY29udGV4dCkge1xuICAgICAgICAgICAgdmFyIHcgPSBjb250ZXh0LmNhbnZhcy53aWR0aDtcbiAgICAgICAgICAgIHJldHVybiB4cmFuZ2UgLyB3O1xuICAgICAgICB9LFxuICAgICAgICBnZXRQaXhlbFBvc2l0aW9uKGNvbnRleHQsIHgsIHkpIHtcbiAgICAgICAgICAgIHZhciB3ID0gY29udGV4dC5jYW52YXMud2lkdGg7XG4gICAgICAgICAgICB2YXIgaCA9IGNvbnRleHQuY2FudmFzLmhlaWdodDtcbiAgICAgICAgICAgIHZhciB4c2NhbGUgPSB3IC8geHJhbmdlO1xuICAgICAgICAgICAgdmFyIHlzY2FsZSA9IGggLyB5cmFuZ2U7XG4gICAgICAgICAgICB2YXIgeG1pZCA9IE1hdGgucm91bmQoTWF0aC5hYnMoeG1pbiAvIHhyYW5nZSkgKiB3KTtcbiAgICAgICAgICAgIHZhciB5bWlkID0gTWF0aC5yb3VuZChNYXRoLmFicyh5bWluIC8geXJhbmdlKSAqIGgpO1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICB4ICogeHNjYWxlICsgeG1pZCxcbiAgICAgICAgICAgICAgICB5ICogeXNjYWxlICsgeW1pZCxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH0sXG4gICAgICAgIGFkanVzdENhbnZhc0NvbnRleHQoY29udGV4dCkge1xuICAgICAgICAgICAgdmFyIHcgPSBjb250ZXh0LmNhbnZhcy53aWR0aDtcbiAgICAgICAgICAgIHZhciBoID0gY29udGV4dC5jYW52YXMuaGVpZ2h0O1xuICAgICAgICAgICAgdmFyIHhzY2FsZSA9IHcgLyB4cmFuZ2U7XG4gICAgICAgICAgICB2YXIgeXNjYWxlID0gaCAvIHlyYW5nZTtcbiAgICAgICAgICAgIHZhciB4bWlkID0gTWF0aC5yb3VuZChNYXRoLmFicyh4bWluIC8geHJhbmdlKSAqIHcpO1xuICAgICAgICAgICAgdmFyIHltaWQgPSBNYXRoLnJvdW5kKE1hdGguYWJzKHltaW4gLyB5cmFuZ2UpICogaCk7XG4gICAgICAgICAgICBjb250ZXh0LnRyYW5zbGF0ZSh4bWlkLCB5bWlkKTtcbiAgICAgICAgICAgIGNvbnRleHQuc2NhbGUoeHNjYWxlLCAteXNjYWxlKTtcbiAgICAgICAgfSxcbiAgICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEludGVydmFsO1xuIiwiZnVuY3Rpb24gTGlzdGVuZXIodGFyZ2V0LCB0eXBlLCBjYikge1xuICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGNiKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBkb25lKCkge1xuICAgICAgICAgICAgdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgY2IpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IExpc3RlbmVyO1xuIiwiY29uc29sZS5sb2coJ3N0YXJ0aW5nIG1haW4nKTtcblxuY29uc3QgVmVjdG9yID0gcmVxdWlyZSgnLi92ZWN0b3InKTtcbmNvbnN0IFBvbHlnb25TcGlubmVyID0gcmVxdWlyZSgnLi9wb2x5Z29uLXNwaW5uZXInKTtcbmNvbnN0IFNwaW5uZXIzZCA9IHJlcXVpcmUoJy4vc3Bpbm5lcjNkJyk7XG5jb25zdCBTcGlubmVyNGQgPSByZXF1aXJlKCcuL3NwaW5uZXI0ZCcpO1xuXG5jb25zdCB0ZW1wbGF0ZSA9IGBcblxuPGgyPjJkIHNwaW5uZXI8L2gyPlxuPGRpdiBjbGFzcz1cImNvbnRhaW5lcjJcIj48L2Rpdj5cblxuPGgyPjNkIHNwaW5uZXI8L2gyPlxuPGRpdiBjbGFzcz1cImNvbnRhaW5lcjNcIj48L2Rpdj5cblxuPGgyPjRkIHNwaW5uZXI8L2gyPlxuPGRpdiBjbGFzcz1cImNvbnRhaW5lcjRcIj48L2Rpdj5cbmA7XG5cbnZhciBtYWluRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdtYWluJyk7XG5cbm1haW5FbC5pbm5lckhUTUwgPSB0ZW1wbGF0ZTtcblxuUG9seWdvblNwaW5uZXIobWFpbkVsLnF1ZXJ5U2VsZWN0b3IoJy5jb250YWluZXIyJykpO1xuXG5TcGlubmVyM2QobWFpbkVsLnF1ZXJ5U2VsZWN0b3IoJy5jb250YWluZXIzJyksIHtcbiAgICBwb2ludHM6IFZlY3Rvci5jdWJlKDAuNSksXG59KTtcblxuU3Bpbm5lcjRkKG1haW5FbC5xdWVyeVNlbGVjdG9yKCcuY29udGFpbmVyNCcpLCB7XG4gICAgcG9pbnRzOiBWZWN0b3IuaHlwZXJjdWJlKDQsIDEpLFxufSk7XG4iLCJjb25zdCBNb25vbWlhbCA9IHtcbiAgICBjcmVhdGUoY29lZmZpY2llbnRzKSB7XG4gICAgICAgIHJldHVybiB4ID0+IHtcbiAgICAgICAgICAgIHZhciBzdW0gPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgbiBpbiBjb2VmZmljaWVudHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgYyA9IGNvZWZmaWNpZW50c1tuXTtcbiAgICAgICAgICAgICAgICBsZXQgeG4gPSBNYXRoLnBvdyh4LCBuKTtcbiAgICAgICAgICAgICAgICBzdW0gKz0gYyAqIHhuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN1bTtcbiAgICAgICAgfTtcbiAgICB9LFxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBNb25vbWlhbDtcbiIsImNvbnN0IExpc3RlbmVyID0gcmVxdWlyZSgnLi9saXN0ZW5lcicpO1xuXG5mdW5jdGlvbiBNdWx0aUJ1dHRvbihub2RlcywgY2IpIHtcbiAgICB2YXIgYnV0dG9ucyA9IFtdO1xuICAgIGZvciAobGV0IG5vZGUgb2Ygbm9kZXMpIHtcbiAgICAgICAgbGV0IGJ1dHRvbiA9IExpc3RlbmVyKG5vZGUsICdjbGljaycsIGV2ZW50ID0+IHtcbiAgICAgICAgICAgIHNldFZhbHVlKGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBidXR0b25zLnB1c2goYnV0dG9uKTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2V0IHZhbHVlKHYpIHtcbiAgICAgICAgICAgIHNldFZhbHVlKHYpO1xuICAgICAgICB9LFxuICAgICAgICBkb25lKCkge1xuICAgICAgICAgICAgZm9yIChsZXQgYnV0dG9uIG9mIGJ1dHRvbnMpIHtcbiAgICAgICAgICAgICAgICBidXR0b24uZG9uZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBmdW5jdGlvbiBzZXRWYWx1ZSh2YWx1ZSkge1xuICAgICAgICBmb3IgKGxldCBub2RlIG9mIG5vZGVzKSB7XG4gICAgICAgICAgICBub2RlLmRpc2FibGVkID0gbm9kZS52YWx1ZSA9PT0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgY2IodmFsdWUpO1xuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBNdWx0aUJ1dHRvbjtcbiIsImNvbnN0IExpc3RlbmVyID0gcmVxdWlyZSgnLi9saXN0ZW5lcicpO1xuXG5mdW5jdGlvbiBNdWx0aVByZXNzZXIobm9kZXMsIGNiKXtcbiAgICB2YXIgdXBzID0gW107XG4gICAgdmFyIGRucyA9IFtdO1xuICAgIGZvciAobGV0IG5vZGUgb2Ygbm9kZXMpIHtcbiAgICAgICAgbGV0IGRuID0gTGlzdGVuZXIobm9kZSwgJ21vdXNlZG93bicsIGV2ZW50ID0+IHtcbiAgICAgICAgICAgIGNiKGV2ZW50LnRhcmdldCk7XG4gICAgICAgIH0pO1xuICAgICAgICBkbnMucHVzaChkbik7XG4gICAgICAgIGxldCB1cCA9IExpc3RlbmVyKG5vZGUsICdtb3VzZXVwJywgZXZlbnQgPT4ge1xuICAgICAgICAgICAgY2IobnVsbCk7XG4gICAgICAgIH0pO1xuICAgICAgICB1cHMucHVzaCh1cCk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGRvbmUoKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBkbiBvZiBkbnMpIHtcbiAgICAgICAgICAgICAgICBkbi5kb25lKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCB1cCBvZiB1cHMpIHtcbiAgICAgICAgICAgICAgICB1cC5kb25lKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBNdWx0aVByZXNzZXI7XG4iLCJjb25zdCBWZWN0b3IgPSByZXF1aXJlKCcuL3ZlY3RvcicpO1xuY29uc3QgSW50ZXJ2YWwgPSByZXF1aXJlKCcuL2ludGVydmFsJyk7XG5cbmZ1bmN0aW9uIFBvaW50UmVuZGVyZXIoY2FudmFzLCBvcHRpb25zKSB7XG4gICAgdmFyIGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICB2YXIgaW50ZXJ2YWwgPSBJbnRlcnZhbCh7XG4gICAgICAgIHhtaW46IG9wdGlvbnMueG1pbiwgeG1heDogb3B0aW9ucy54bWF4LFxuICAgICAgICB5bWluOiBvcHRpb25zLnltaW4sIHltYXg6IG9wdGlvbnMueW1heCxcbiAgICB9KTtcbiAgICBjbGVhcigpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlbmRlcihwb2ludHMsIGNvbG9ycykge1xuICAgICAgICAgICAgdmFyIGNvbG9yaXplID0gVmVjdG9yLmNvbG9yaXplcihjb2xvcnMpO1xuICAgICAgICAgICAgaWYgKCFjb2xvcnMpIHtcbiAgICAgICAgICAgICAgICBjb2xvcnMgPSBbJ2JsYWNrJ107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjbGVhcigpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSBpbiBwb2ludHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgY29sb3IgPSBjb2xvcml6ZShwb2ludHNbaV0sIGkpO1xuICAgICAgICAgICAgICAgIGNvbG9yc1tpICUgY29sb3JzLmxlbmd0aF07XG4gICAgICAgICAgICAgICAgbGV0IHBvaW50ID0gcG9pbnRzW2ldO1xuICAgICAgICAgICAgICAgIHZhciB4ID0gcG9pbnRbMF07XG4gICAgICAgICAgICAgICAgdmFyIHkgPSBwb2ludFsxXTtcbiAgICAgICAgICAgICAgICB2YXIgY2FudmFzUG9pbnQgPSBpbnRlcnZhbC5nZXRQaXhlbFBvc2l0aW9uKGNvbnRleHQsIHgsIHkpO1xuICAgICAgICAgICAgICAgIHZhciBjeCA9IGNhbnZhc1BvaW50WzBdO1xuICAgICAgICAgICAgICAgIHZhciBjeSA9IGNhbnZhc1BvaW50WzFdO1xuICAgICAgICAgICAgICAgIGNvbnRleHQuc2F2ZSgpO1xuICAgICAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBjb2xvcjtcbiAgICAgICAgICAgICAgICBjb250ZXh0LnN0cm9rZVJlY3QoY3gsIGN5LCAyLCAyKTtcbiAgICAgICAgICAgICAgICBjb250ZXh0LnJlc3RvcmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZG9uZSgpIHtcblxuICAgICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgICAgICBjb250ZXh0LnNhdmUoKTtcbiAgICAgICAgY29udGV4dC5maWxsU3R5bGUgPSAnd2hpdGUnO1xuICAgICAgICBjb250ZXh0LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICAgIGNvbnRleHQucmVzdG9yZSgpO1xuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBQb2ludFJlbmRlcmVyO1xuIiwiY29uc3QgUG9pbnRSZW5kZXJlciA9IHJlcXVpcmUoJy4vcG9pbnQtcmVuZGVyZXInKTtcbmNvbnN0IEdyYXBoUmVuZGVyZXIgPSByZXF1aXJlKCcuL2dyYXBoLXJlbmRlcmVyJyk7XG5jb25zdCBBbmltYXRvciA9IHJlcXVpcmUoJy4vYW5pbWF0b3InKTtcbmNvbnN0IFZlY3RvciA9IHJlcXVpcmUoJy4vdmVjdG9yJyk7XG5jb25zdCBNdWx0aVByZXNzZXIgPSByZXF1aXJlKCcuL211bHRpLXByZXNzZXInKTtcblxuY29uc3QgUk9UQVRJT05fU1BFRUQgPSAwLjAxO1xuXG5jb25zdCB0ZW1wbGF0ZSA9IGBcbjxjYW52YXMgY2xhc3M9XCJncmFwaC1yZW5kZXJlclwiIHdpZHRoPVwiMjU2XCIgaGVpZ2h0PVwiMjU2XCI+PC9jYW52YXM+XG48Y2FudmFzIGNsYXNzPVwicG9pbnQtcmVuZGVyZXJcIiB3aWR0aD1cIjI1NlwiIGhlaWdodD1cIjI1NlwiPjwvY2FudmFzPlxuPGlucHV0IHR5cGU9XCJidXR0b25cIiB2YWx1ZT1cIi1cIiBjbGFzcz1cInNwZWVkXCIvPlxuPGlucHV0IHR5cGU9XCJidXR0b25cIiB2YWx1ZT1cIitcIiBjbGFzcz1cInNwZWVkXCIvPlxuYDtcblxuZnVuY3Rpb24gUG9seWdvblNwaW5uZXIobm9kZSwgb3B0aW9ucykge1xuXG4gICAgdmFyIG1haW5FbCA9IG5vZGU7XG5cbiAgICBub2RlLmlubmVySFRNTCA9IHRlbXBsYXRlO1xuXG4gICAgdmFyIGdyYXBoQ2FudmFzID0gbm9kZS5xdWVyeVNlbGVjdG9yKCdjYW52YXMuZ3JhcGgtcmVuZGVyZXInKTtcbiAgICB2YXIgcG9pbnRDYW52YXMgPSBub2RlLnF1ZXJ5U2VsZWN0b3IoJ2NhbnZhcy5wb2ludC1yZW5kZXJlcicpO1xuICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICB4bWluOiAtMiwgeG1heDogMixcbiAgICAgICAgeW1pbjogLTIsIHltYXg6IDIsXG4gICAgfTtcbiAgICB2YXIgZ3JhcGhSZW5kZXJlciA9IEdyYXBoUmVuZGVyZXIoZ3JhcGhDYW52YXMsIG9wdGlvbnMpO1xuICAgIHZhciBwb2ludFJlbmRlcmVyID0gUG9pbnRSZW5kZXJlcihwb2ludENhbnZhcywgb3B0aW9ucyk7XG5cbiAgICB2YXIgcG9pbnRzID0gVmVjdG9yLnBvbHlnb24oNiwgMSk7XG5cbiAgICB2YXIgcm90YXRpb25TcGVlZCA9IDA7XG5cbiAgICB2YXIgYW5pbWF0b3IgPSBBbmltYXRvcigoKSA9PiB7XG4gICAgICAgIHZhciBjb2xvcnMgPSBbJ3JlZCcsICd5ZWxsb3cnLCAnZ3JlZW4nLCAnY3lhbicsICdibHVlJywgJ21hZ2VudGEnXTtcbiAgICAgICAgZ3JhcGhSZW5kZXJlci5yZW5kZXIocG9pbnRzLCBjb2xvcnMpO1xuICAgICAgICBwb2ludFJlbmRlcmVyLnJlbmRlcihwb2ludHMsIGNvbG9ycyk7XG4gICAgICAgIGZvciAobGV0IGkgaW4gcG9pbnRzKSB7XG4gICAgICAgICAgICBwb2ludHNbaV0gPSBWZWN0b3Iucm90YXRlKHBvaW50c1tpXSwgMCwgMSwgcm90YXRpb25TcGVlZCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciBtdWx0aVByZXNzZXIgPSBNdWx0aVByZXNzZXIobm9kZS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwiYnV0dG9uXCJdLnNwZWVkJyksIHRhcmdldCA9PiB7XG4gICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICAgIHN3aXRjaCAodGFyZ2V0LnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnLSc6XG4gICAgICAgICAgICAgICAgICAgIHJvdGF0aW9uU3BlZWQgPSAtUk9UQVRJT05fU1BFRUQ7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJysnOlxuICAgICAgICAgICAgICAgICAgICByb3RhdGlvblNwZWVkID0gUk9UQVRJT05fU1BFRUQ7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYW5pbWF0b3Iuc3RhcnQoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJvdGF0aW9uU3BlZWQgPSAwO1xuICAgICAgICAgICAgYW5pbWF0b3Iuc3RvcCgpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBhbmltYXRvci5zdGVwKCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBkb25lKCkge1xuICAgICAgICAgICAgYW5pbWF0b3IuZG9uZSgpO1xuICAgICAgICAgICAgZ3JhcGhSZW5kZXJlci5kb25lKCk7XG4gICAgICAgICAgICBwb2ludFJlbmRlcmVyLmRvbmUoKTtcbiAgICAgICAgICAgIG11bHRpUHJlc3Nlci5kb25lKCk7XG4gICAgICAgIH0sXG4gICAgfTtcblxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFBvbHlnb25TcGlubmVyO1xuIiwiY29uc3QgVmVjdG9yID0gcmVxdWlyZSgnLi92ZWN0b3InKTtcbmNvbnN0IEFuaW1hdG9yID0gcmVxdWlyZSgnLi9hbmltYXRvcicpO1xuY29uc3QgR3JhcGhSZW5kZXJlciA9IHJlcXVpcmUoJy4vZ3JhcGgtcmVuZGVyZXInKTtcbmNvbnN0IFBvaW50UmVuZGVyZXIgPSByZXF1aXJlKCcuL3BvaW50LXJlbmRlcmVyJyk7XG5jb25zdCBNdWx0aUJ1dHRvbiA9IHJlcXVpcmUoJy4vbXVsdGktYnV0dG9uJyk7XG5jb25zdCBNdWx0aVByZXNzZXIgPSByZXF1aXJlKCcuL211bHRpLXByZXNzZXInKTtcblxuY29uc3QgUk9UQVRJT05fU1BFRUQgPSAwLjAxO1xuXG5jb25zdCB0ZW1wbGF0ZSA9IGBcbjxjYW52YXMgd2lkdGg9XCIyNTZcIiBoZWlnaHQ9XCIyNTZcIiBjbGFzcz1cImdyYXBoLXJlbmRlcmVyXCI+PC9jYW52YXM+XG48Y2FudmFzIHdpZHRoPVwiMjU2XCIgaGVpZ2h0PVwiMjU2XCIgY2xhc3M9XCJwb2ludC1yZW5kZXJlclwiPjwvY2FudmFzPlxuPGlucHV0IHR5cGU9XCJidXR0b25cIiB2YWx1ZT1cIngteVwiIGNsYXNzPVwiYXhpc1wiLz5cbjxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJ5LXpcIiBjbGFzcz1cImF4aXNcIi8+XG48aW5wdXQgdHlwZT1cImJ1dHRvblwiIHZhbHVlPVwieC16XCIgY2xhc3M9XCJheGlzXCIvPlxuPGlucHV0IHR5cGU9XCJidXR0b25cIiB2YWx1ZT1cIi1cIiBjbGFzcz1cInNwZWVkXCIvPlxuPGlucHV0IHR5cGU9XCJidXR0b25cIiB2YWx1ZT1cIitcIiBjbGFzcz1cInNwZWVkXCIvPlxuYDtcblxuZnVuY3Rpb24gU3Bpbm5lcjNkKG5vZGUsIG9wdGlvbnMpIHtcblxuICAgIGlmICghb3B0aW9ucykge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgLy8gdmVjdG9ycyB0byByZW5kZXJcbiAgICB2YXIgcG9pbnRzID0gb3B0aW9ucy5wb2ludHMgfHwgW107XG5cbiAgICAvLyBpbmRpY2VzIG9mIGF4ZXMgdG8gcm90YXRlXG4gICAgdmFyIHJvdGF0aW9uO1xuXG4gICAgdmFyIHJvdGF0aW9uU3BlZWQgPSAwO1xuXG4gICAgbm9kZS5pbm5lckhUTUwgPSB0ZW1wbGF0ZTtcblxuICAgIHZhciByZW5kZXJlck9wdGlvbnMgPSB7XG4gICAgICAgIHhtaW46IC0yLCB4bWF4OiAyLFxuICAgICAgICB5bWluOiAtMiwgeW1heDogMixcbiAgICB9O1xuICAgIHZhciBncmFwaFJlbmRlcmVyID0gR3JhcGhSZW5kZXJlcihub2RlLnF1ZXJ5U2VsZWN0b3IoJ2NhbnZhcy5ncmFwaC1yZW5kZXJlcicpLCByZW5kZXJlck9wdGlvbnMpO1xuICAgIHZhciBwb2ludFJlbmRlcmVyID0gUG9pbnRSZW5kZXJlcihub2RlLnF1ZXJ5U2VsZWN0b3IoJ2NhbnZhcy5wb2ludC1yZW5kZXJlcicpLCByZW5kZXJlck9wdGlvbnMpO1xuXG4gICAgdmFyIGFuaW1hdG9yID0gQW5pbWF0b3IoKCkgPT4ge1xuICAgICAgICBwb2ludHMgPSBwb2ludHMubWFwKHBvaW50ID0+IFZlY3Rvci5yb3RhdGUocG9pbnQsIHJvdGF0aW9uWzBdLCByb3RhdGlvblsxXSwgcm90YXRpb25TcGVlZCkpO1xuICAgICAgICBncmFwaFJlbmRlcmVyLnJlbmRlcihwb2ludHMpO1xuICAgICAgICBwb2ludFJlbmRlcmVyLnJlbmRlcihwb2ludHMsIChwb2ludCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIC8vIHogPT4gYyA6IDIgPT4gMjU1LCAtMiA9PiAwXG4gICAgICAgICAgICB2YXIgeiA9IHBvaW50WzJdO1xuICAgICAgICAgICAgdmFyIGMgPSA2MyAqIHogKyAxMjc7XG4gICAgICAgICAgICBjID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMjU1LCBNYXRoLnJvdW5kKGMpKSk7XG4gICAgICAgICAgICByZXR1cm4gYHJnYigke2N9LCAke2N9LCAke2N9KWA7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdmFyIGF4aXNNdWx0aUJ1dHRvbiA9IE11bHRpQnV0dG9uKG5vZGUucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cImJ1dHRvblwiXS5heGlzJyksIHZhbHVlID0+IHtcbiAgICAgICAgdmFyIHBhcnRzID0gU3RyaW5nKHZhbHVlKS5zcGxpdCgnLScpO1xuICAgICAgICB2YXIgYXhlcyA9IFsneCcsICd5JywgJ3onXTtcbiAgICAgICAgdmFyIGF4aXMxID0gYXhlcy5pbmRleE9mKHBhcnRzWzBdKTtcbiAgICAgICAgdmFyIGF4aXMyID0gYXhlcy5pbmRleE9mKHBhcnRzWzFdKTtcbiAgICAgICAgcm90YXRpb24gPSBbYXhpczEsIGF4aXMyXTtcbiAgICB9KTtcbiAgICBheGlzTXVsdGlCdXR0b24udmFsdWUgPSAneC15JzsgLy8gaW5pdGlhbGl6ZSB0byBkZWZhdWx0IGF4aXNcblxuICAgIHZhciBzcGVlZE11bHRpQnV0dG9uID0gTXVsdGlQcmVzc2VyKG5vZGUucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cImJ1dHRvblwiXS5zcGVlZCcpLCB0YXJnZXQgPT4ge1xuICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhcmdldC52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJy0nOlxuICAgICAgICAgICAgICAgICAgICByb3RhdGlvblNwZWVkID0gLVJPVEFUSU9OX1NQRUVEO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICcrJzpcbiAgICAgICAgICAgICAgICAgICAgcm90YXRpb25TcGVlZCA9IFJPVEFUSU9OX1NQRUVEO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFuaW1hdG9yLnN0YXJ0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByb3RhdGlvblNwZWVkID0gMDtcbiAgICAgICAgICAgIGFuaW1hdG9yLnN0b3AoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgYW5pbWF0b3Iuc3RlcCgpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZG9uZSgpe1xuICAgICAgICAgICAgZ3JhcGhSZW5kZXJlci5kb25lKCk7XG4gICAgICAgICAgICBwb2ludFJlbmRlcmVyLmRvbmUoKTtcbiAgICAgICAgICAgIGFuaW1hdG9yLmRvbmUoKTtcbiAgICAgICAgICAgIGF4aXNNdWx0aUJ1dHRvbi5kb25lKCk7XG4gICAgICAgICAgICBzcGVlZE11bHRpQnV0dG9uLmRvbmUoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBTcGlubmVyM2Q7XG4iLCJjb25zdCBWZWN0b3IgPSByZXF1aXJlKCcuL3ZlY3RvcicpO1xuY29uc3QgQW5pbWF0b3IgPSByZXF1aXJlKCcuL2FuaW1hdG9yJyk7XG5jb25zdCBHcmFwaFJlbmRlcmVyID0gcmVxdWlyZSgnLi9ncmFwaC1yZW5kZXJlcicpO1xuY29uc3QgUG9pbnRSZW5kZXJlciA9IHJlcXVpcmUoJy4vcG9pbnQtcmVuZGVyZXInKTtcbmNvbnN0IE11bHRpQnV0dG9uID0gcmVxdWlyZSgnLi9tdWx0aS1idXR0b24nKTtcbmNvbnN0IE11bHRpUHJlc3NlciA9IHJlcXVpcmUoJy4vbXVsdGktcHJlc3NlcicpO1xuXG5jb25zdCBST1RBVElPTl9TUEVFRCA9IDAuMDE7XG5cbmNvbnN0IHRlbXBsYXRlID0gYFxuPGNhbnZhcyB3aWR0aD1cIjI1NlwiIGhlaWdodD1cIjI1NlwiIGNsYXNzPVwiZ3JhcGgtcmVuZGVyZXJcIj48L2NhbnZhcz5cbjxjYW52YXMgd2lkdGg9XCIyNTZcIiBoZWlnaHQ9XCIyNTZcIiBjbGFzcz1cInBvaW50LXJlbmRlcmVyXCI+PC9jYW52YXM+XG48aW5wdXQgdHlwZT1cImJ1dHRvblwiIHZhbHVlPVwieC15XCIgY2xhc3M9XCJheGlzXCIvPlxuPGlucHV0IHR5cGU9XCJidXR0b25cIiB2YWx1ZT1cInktelwiIGNsYXNzPVwiYXhpc1wiLz5cbjxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJ4LXpcIiBjbGFzcz1cImF4aXNcIi8+XG48aW5wdXQgdHlwZT1cImJ1dHRvblwiIHZhbHVlPVwieC13XCIgY2xhc3M9XCJheGlzXCIvPlxuPGlucHV0IHR5cGU9XCJidXR0b25cIiB2YWx1ZT1cInktd1wiIGNsYXNzPVwiYXhpc1wiLz5cbjxpbnB1dCB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJ6LXdcIiBjbGFzcz1cImF4aXNcIi8+XG48aW5wdXQgdHlwZT1cImJ1dHRvblwiIHZhbHVlPVwiLVwiIGNsYXNzPVwic3BlZWRcIi8+XG48aW5wdXQgdHlwZT1cImJ1dHRvblwiIHZhbHVlPVwiK1wiIGNsYXNzPVwic3BlZWRcIi8+XG5gO1xuXG5mdW5jdGlvbiBTcGlubmVyNGQobm9kZSwgb3B0aW9ucykge1xuXG4gICAgaWYgKCFvcHRpb25zKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICAvLyB2ZWN0b3JzIHRvIHJlbmRlclxuICAgIHZhciBwb2ludHMgPSBvcHRpb25zLnBvaW50cyB8fCBbXTtcbiAgICBmb3IgKGxldCBpIGluIHBvaW50cykge1xuICAgICAgICB3aGlsZSAocG9pbnRzW2ldLmxlbmd0aCA8IDQpIHtcbiAgICAgICAgICAgIHBvaW50c1tpXS5wdXNoKDApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gaW5kaWNlcyBvZiBheGVzIHRvIHJvdGF0ZVxuICAgIHZhciByb3RhdGlvbjtcblxuICAgIHZhciByb3RhdGlvblNwZWVkID0gMDtcblxuICAgIG5vZGUuaW5uZXJIVE1MID0gdGVtcGxhdGU7XG5cbiAgICB2YXIgcmVuZGVyZXJPcHRpb25zID0ge1xuICAgICAgICB4bWluOiAtMiwgeG1heDogMixcbiAgICAgICAgeW1pbjogLTIsIHltYXg6IDIsXG4gICAgfTtcbiAgICB2YXIgZ3JhcGhSZW5kZXJlciA9IEdyYXBoUmVuZGVyZXIobm9kZS5xdWVyeVNlbGVjdG9yKCdjYW52YXMuZ3JhcGgtcmVuZGVyZXInKSwgcmVuZGVyZXJPcHRpb25zKTtcbiAgICB2YXIgcG9pbnRSZW5kZXJlciA9IFBvaW50UmVuZGVyZXIobm9kZS5xdWVyeVNlbGVjdG9yKCdjYW52YXMucG9pbnQtcmVuZGVyZXInKSwgcmVuZGVyZXJPcHRpb25zKTtcblxuICAgIHZhciBhbmltYXRvciA9IEFuaW1hdG9yKCgpID0+IHtcbiAgICAgICAgcG9pbnRzID0gcG9pbnRzLm1hcChwb2ludCA9PiBWZWN0b3Iucm90YXRlKHBvaW50LCByb3RhdGlvblswXSwgcm90YXRpb25bMV0sIHJvdGF0aW9uU3BlZWQpKTtcbiAgICAgICAgZ3JhcGhSZW5kZXJlci5yZW5kZXIocG9pbnRzKTtcbiAgICAgICAgcG9pbnRSZW5kZXJlci5yZW5kZXIocG9pbnRzLCAocG9pbnQsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICB2YXIgeiA9IHBvaW50WzJdO1xuICAgICAgICAgICAgdmFyIHcgPSBwb2ludFszXTtcbiAgICAgICAgICAgIHZhciBsdW0gPSAwLjI1ICogeiArIDAuNTtcbiAgICAgICAgICAgIHZhciBzYXQgPSAwLjI1ICogdyArIDAuNTtcbiAgICAgICAgICAgIGx1bSA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEwMCwgTWF0aC5yb3VuZChsdW0gKiAxMDApKSk7XG4gICAgICAgICAgICBzYXQgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxMDAsIE1hdGgucm91bmQoc2F0ICogMTAwKSkpO1xuICAgICAgICAgICAgcmV0dXJuIGBoc2woMCwgJHtzYXR9JSwgJHtsdW19JSlgO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIHZhciBheGlzTXVsdGlCdXR0b24gPSBNdWx0aUJ1dHRvbihub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJidXR0b25cIl0uYXhpcycpLCB2YWx1ZSA9PiB7XG4gICAgICAgIHZhciBwYXJ0cyA9IFN0cmluZyh2YWx1ZSkuc3BsaXQoJy0nKTtcbiAgICAgICAgdmFyIGF4ZXMgPSBbJ3gnLCAneScsICd6JywgJ3cnXTtcbiAgICAgICAgdmFyIGF4aXMxID0gYXhlcy5pbmRleE9mKHBhcnRzWzBdKTtcbiAgICAgICAgdmFyIGF4aXMyID0gYXhlcy5pbmRleE9mKHBhcnRzWzFdKTtcbiAgICAgICAgcm90YXRpb24gPSBbYXhpczEsIGF4aXMyXTtcbiAgICB9KTtcbiAgICBheGlzTXVsdGlCdXR0b24udmFsdWUgPSAneC15JzsgLy8gaW5pdGlhbGl6ZSB0byBkZWZhdWx0IGF4aXNcblxuICAgIHZhciBzcGVlZE11bHRpQnV0dG9uID0gTXVsdGlQcmVzc2VyKG5vZGUucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cImJ1dHRvblwiXS5zcGVlZCcpLCB0YXJnZXQgPT4ge1xuICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHRhcmdldC52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJy0nOlxuICAgICAgICAgICAgICAgICAgICByb3RhdGlvblNwZWVkID0gLVJPVEFUSU9OX1NQRUVEO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICcrJzpcbiAgICAgICAgICAgICAgICAgICAgcm90YXRpb25TcGVlZCA9IFJPVEFUSU9OX1NQRUVEO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFuaW1hdG9yLnN0YXJ0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByb3RhdGlvblNwZWVkID0gMDtcbiAgICAgICAgICAgIGFuaW1hdG9yLnN0b3AoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgYW5pbWF0b3Iuc3RlcCgpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZG9uZSgpIHtcbiAgICAgICAgICAgIGdyYXBoUmVuZGVyZXIuZG9uZSgpO1xuICAgICAgICAgICAgcG9pbnRSZW5kZXJlci5kb25lKCk7XG4gICAgICAgICAgICBhbmltYXRvci5kb25lKCk7XG4gICAgICAgICAgICBheGlzTXVsdGlCdXR0b24uZG9uZSgpO1xuICAgICAgICAgICAgc3BlZWRNdWx0aUJ1dHRvbi5kb25lKCk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFNwaW5uZXI0ZDsiLCJjb25zdCBUQVUgPSBNYXRoLlBJICogMjtcblxuY29uc3QgVmVjdG9yID0ge1xuICAgIGFkZChhLCBiKSB7XG4gICAgICAgIHJldHVybiBhLm1hcCgoYWksIGkpID0+IGFbaV0gKyBiW2ldKTtcbiAgICB9LFxuICAgIHNjYWxlKHMsIGEpIHtcbiAgICAgICAgcmV0dXJuIGEubWFwKGFpID0+IHMgKiBhaSk7XG4gICAgfSxcbiAgICByb3RhdGUoYSwgdSwgdiwgYW5nbGUpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZygncm90YXRpbmcgYnknLCBhbmdsZSk7XG4gICAgICAgIHZhciBjb3MgPSBNYXRoLmNvcyhhbmdsZSk7XG4gICAgICAgIHZhciBzaW4gPSBNYXRoLnNpbihhbmdsZSk7XG4gICAgICAgIC8vY29uc29sZS5sb2coJ2NvcycsIGNvcyk7XG4gICAgICAgIC8vY29uc29sZS5sb2coJ3NpbicsIHNpbik7XG4gICAgICAgIHZhciBiID0gYS5tYXAoYWkgPT4gYWkpO1xuICAgICAgICAvL2NvbnNvbGUubG9nKCdpbml0aWFsbHknLCBiKTtcbiAgICAgICAgYlt1XSA9IGFbdV0gKiBjb3MgLSBhW3ZdICogc2luO1xuICAgICAgICBiW3ZdID0gYVt1XSAqIHNpbiArIGFbdl0gKiBjb3M7XG4gICAgICAgIHJldHVybiBiO1xuICAgIH0sXG4gICAgcG9seWdvbihuLCByKSB7XG4gICAgICAgIC8vIGNyZWF0ZSByZWd1bGFyIHBvbHlnb24gY2VudGVyZWQgYXQgb3JpZ2luIHdpdGggbiBwb2ludHMgYXQgcmFkaXVzIHJcbiAgICAgICAgdmFyIHBvaW50cyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IG47IGsrKykge1xuICAgICAgICAgICAgbGV0IGFuZ2xlID0gVEFVICogayAvIG47XG4gICAgICAgICAgICBsZXQgeCA9IHIgKiBNYXRoLmNvcyhhbmdsZSk7XG4gICAgICAgICAgICBsZXQgeSA9IHIgKiBNYXRoLnNpbihhbmdsZSk7XG4gICAgICAgICAgICBwb2ludHMucHVzaChbeCwgeV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwb2ludHM7XG4gICAgfSxcbiAgICBjdWJlKHIpIHtcbiAgICAgICAgciAqPSBNYXRoLnNxcnQoMyk7XG4gICAgICAgIHZhciBwb2ludHMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgeCBvZiBbLXIsIHJdKSB7XG4gICAgICAgICAgICBmb3IgKGxldCB5IG9mIFstciwgcl0pIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB6IG9mIFstciwgcl0pIHtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzLnB1c2goW3gsIHksIHpdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBvaW50cztcbiAgICB9LFxuICAgIGh5cGVyY3ViZShuLCByKSB7XG4gICAgICAgIGlmIChuID09IDEpIHtcbiAgICAgICAgICAgIC8vIGJhc2UgY2FzZVxuICAgICAgICAgICAgcmV0dXJuIFtbLXJdLCBbcl1dO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHN1YnBvaW50cyA9IHRoaXMuaHlwZXJjdWJlKG4gLSAxLCByKTtcbiAgICAgICAgICAgIHZhciBwb2ludHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IHN1YnBvaW50IG9mIHN1YnBvaW50cykge1xuICAgICAgICAgICAgICAgIHZhciBzMSA9IHN1YnBvaW50LnNsaWNlKCk7XG4gICAgICAgICAgICAgICAgdmFyIHMyID0gc3VicG9pbnQuc2xpY2UoKTtcbiAgICAgICAgICAgICAgICBzMS5wdXNoKC1yKTtcbiAgICAgICAgICAgICAgICBzMi5wdXNoKHIpO1xuICAgICAgICAgICAgICAgIHBvaW50cy5wdXNoKHMxKTtcbiAgICAgICAgICAgICAgICBwb2ludHMucHVzaChzMik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcG9pbnRzO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBjb2xvcml6ZXIoc291cmNlKSB7XG4gICAgICAgIGlmICghc291cmNlKSB7XG4gICAgICAgICAgICByZXR1cm4gKHZlY3RvciwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgeiA9IHZlY3RvclsyXSB8fCAwO1xuICAgICAgICAgICAgICAgIHZhciB3ID0gdmVjdG9yWzNdIHx8IDA7XG4gICAgICAgICAgICAgICAgdmFyIGFuZ2xlID0gTWF0aC5hdGFuMih3LCB6KTtcbiAgICAgICAgICAgICAgICBpZiAoYW5nbGUgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGFuZ2xlICs9IDIgKiBNYXRoLlBJO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbWF4ID0gMjtcbiAgICAgICAgICAgICAgICB2YXIgbWFnRmFjdG9yID0gbWF4ICogTWF0aC5zcXJ0KHZlY3Rvci5sZW5ndGgpO1xuXG4gICAgICAgICAgICAgICAgdmFyIG1hZyA9IE1hdGguc3FydCh6ICogeiArIHcgKiB3KTtcbiAgICAgICAgICAgICAgICB2YXIgaHVlID0gTWF0aC5yb3VuZChhbmdsZSAqIDE4MCAvIE1hdGguUEkpO1xuICAgICAgICAgICAgICAgIHZhciBzYXQgPSAxMDAgKyAnJSc7XG4gICAgICAgICAgICAgICAgdmFyIGx1bSA9IE1hdGgucm91bmQobWFnICogMTAwIC8gbWFnRmFjdG9yKSArICclJztcbiAgICAgICAgICAgICAgICByZXR1cm4gYGhzbCgke2h1ZX0sICR7c2F0fSwgJHtsdW19KWA7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoc291cmNlKSkge1xuICAgICAgICAgICAgcmV0dXJuICh2ZWN0b3IsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNvdXJjZVtpbmRleCAlIHNvdXJjZS5sZW5ndGhdO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2Ygc291cmNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICByZXR1cm4gc291cmNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIGNvbG9yaXplciBzb3VyY2UnKTtcbiAgICAgICAgfVxuICAgIH0sXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFZlY3RvcjtcblxuIl19"}